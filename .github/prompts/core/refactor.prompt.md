# 리팩토링 프롬프트

> 기존 코드를 개선하거나 패턴을 통일하는 프롬프트

---

## 기본 사용법

```markdown
@developer.agent.md

## 리팩토링 대상
[파일 또는 모듈 경로]

## 목표
[리팩토링 목적]

## 참조 패턴
[일치시킬 기존 파일/모듈]

## 제약
- 기능 변경 없음 (동작 동일)
- 테스트 통과 필수
- 변경점 최소화
```

---

## 예시: 패턴 통일

```markdown
@developer.agent.md

## 리팩토링 대상
[old-module-path]

## 목표
최신 패턴으로 통일 ([reference-module] 기준)

## 참조 패턴
[reference-module-path]

## 적용 항목
- [ ] DTO/타입 네이밍 패턴
- [ ] 응답 형식
- [ ] 에러 처리 패턴
- [ ] API 문서 데코레이터 스타일

## 제약
- 기능 변경 없음
- 기존 API 호환성 유지
```

---

## 예시: Dead Code 제거

```markdown
@developer.agent.md

## 리팩토링 대상
[component-path]

## 목표
미사용 코드 제거

## 작업
1. 미사용 import 제거
2. 미사용 컴포넌트 삭제
3. 미사용 함수/변수 삭제
4. 빈 파일 삭제

## 제약
- 삭제 전 사용처 확인 필수
- 삭제 목록 사전 보고 후 승인 받기
```

---

## 예시: 구조 개선

```markdown
@developer.agent.md

## 리팩토링 대상
[target-path]

## 목표
폴더 구조 정리

## 현재 문제
- 역할이 불분명한 파일들
- 중복된 유틸 함수

## 제안 구조
```
common/
├── decorators/
├── filters/
├── guards/
├── interceptors/
├── pipes/
└── utils/
```

## 제약
- 기존 import 경로 호환
- 점진적 마이그레이션
```

---

## 단축 버전

빠른 리팩토링 시:

```markdown
@developer.agent.md
[파일] 리팩토링. [기존 파일] 패턴에 맞춤. 변경점 최소화.
```

---

## 리팩토링 워크플로우

```
1. 현재 상태 분석
   ↓
2. 문제점 식별
   ↓
3. 리팩토링 계획 수립
   ↓
4. [사용자 승인] ⏸️
   ↓
5. 단계별 실행 (작은 단위로)
   ↓
6. 각 단계 테스트 확인
   ↓
7. 완료 보고
```

---

## 승인 필요 항목

다음 작업은 **반드시 사용자 승인** 후 진행:

| 작업 | 이유 |
|------|------|
| 파일 삭제 | 복구 어려움 |
| 폴더 구조 변경 | import 경로 영향 |
| 새 패턴 도입 | 일관성 검토 필요 |
| 대규모 변경 (10+ 파일) | 영향 범위 확인 |

---

## 체크리스트 (완료 전 확인)

- [ ] 기능 동작 동일
- [ ] 모든 테스트 통과
- [ ] 린트 오류 없음
- [ ] 빌드 성공
- [ ] Dead Code 없음
- [ ] 문서 Changelog 업데이트
