# 구현 계획 프롬프트

> 기능 명세를 기술적 구현 계획으로 변환할 때 사용하는 프롬프트
> Spec-Driven Development (SDD) 방법론 기반

---

## 역할 정의

당신은 **기술 아키텍트**입니다.
기능 명세(spec.md)를 바탕으로 구현 계획을 수립하며,
프로젝트의 아키텍처와 원칙을 준수합니다.

> **Note**: 기술 스택, 프로젝트 구조는 `copilot-instructions.md`를 참조하세요.

---

## 전제 조건

구현 계획 작성 전 **반드시 확인**:

1. ✅ 기능 명세(spec.md) 완료
2. ✅ `[NEEDS CLARIFICATION]` 마커 모두 해결
3. ✅ 사용자 스토리와 수용 기준 정의됨

---

## 구현 계획 템플릿

```markdown
# 구현 계획: [기능명]

**브랜치**: `feature/###-feature-name`
**작성일**: [DATE]
**명세**: [spec.md 링크]

---

## 요약

[명세의 핵심 요구사항 + 기술적 접근 방식 1-2문장]

---

## 기술 컨텍스트

> 아래 정보는 `copilot-instructions.md`에서 참조합니다.

**언어/버전**: [프로젝트 기술 스택]
**백엔드**: [프로젝트 백엔드 프레임워크]
**프론트엔드**: [프로젝트 프론트엔드 프레임워크]
**스토리지**: [프로젝트 데이터베이스]
**테스트**: [프로젝트 테스트 프레임워크]

**제약사항**: [도메인 특화 제약, 예: p95 < 200ms, 오프라인 지원 등]
**규모**: [사용자 수, 데이터 볼륨 등]

---

## 원칙 체크 (Gate)

*GATE: Phase 0 연구 전 통과 필수. Phase 1 설계 후 재확인.*

### Simplicity Gate

- [ ] 모듈 ≤3개 사용
- [ ] 미래 기능 선제작 없음
- [ ] 불필요한 추상화 없음

### Anti-Abstraction Gate

- [ ] 프레임워크 직접 사용 (래퍼 없음)
- [ ] 단일 모델 표현 (엔티티 중복 없음)
- [ ] 불필요한 상속 없음

### Integration Gate

- [ ] API 계약 정의됨
- [ ] 테스트 시나리오 명확

---

## 프로젝트 구조

### 문서 (이 기능)

> 프로젝트 문서 구조를 참조하여 작성

```text
[feature-docs-path]/
├── spec.md              # 기능 명세
├── plan.md              # 이 파일
├── research.md          # Phase 0 연구 결과
├── data-model.md        # 데이터 모델
└── tasks.md             # 태스크 목록
```

### 소스 코드

> `copilot-instructions.md`의 프로젝트 구조를 참조

```text
[backend-path]/[feature]/
├── [feature].controller.*
├── [feature].service.*
├── [feature].module.*
└── dto/

[frontend-path]/[feature]/
├── page.*
└── components/
```

---

## 복잡도 추적

> **원칙 체크 위반 시에만 작성**

| 위반 | 필요 이유 | 더 단순한 대안을 거부한 이유 |
|------|----------|---------------------------|
| [예: 4번째 모듈] | [현재 필요] | [3개로 불충분한 이유] |

---

## Phase 0: 연구

**목표**: 모든 `[NEEDS CLARIFICATION]` 해결, 기술 선택 근거 문서화

### 연구 항목

1. **[연구 주제 1]**
   - 질문: [구체적 질문]
   - 선택지: [A vs B vs C]
   - 결론: [선택 + 근거]

2. **[연구 주제 2]**
   - 질문: [구체적 질문]
   - 결론: [결정사항]

**산출물**: `research.md`

---

## Phase 1: 설계 & 계약

**전제**: Phase 0 완료

### 1.1 데이터 모델

```text
[Entity1] ──1:N──> [Entity2]
    │
    └──1:1──> [Entity3]
```

**엔티티 상세**:

| 엔티티 | 핵심 필드 | 관계 |
|--------|----------|------|
| Entity1 | id, name, status | Entity2 1:N |
| Entity2 | id, entity1Id, data | Entity1 N:1 |

**산출물**: `data-model.md`

### 1.2 API 계약

| 엔드포인트 | 메서드 | 설명 | 요청 | 응답 |
|-----------|--------|------|------|------|
| /api/[resource] | GET | 목록 조회 | Query: page, limit | List + Meta |
| /api/[resource] | POST | 생성 | Body: CreateDto | Created Entity |
| /api/[resource]/:id | GET | 상세 조회 | Param: id | Entity |
| /api/[resource]/:id | PATCH | 수정 | Body: UpdateDto | Updated Entity |
| /api/[resource]/:id | DELETE | 삭제 | Param: id | void |

**산출물**: API 문서 (코드 생성)

### 1.3 검증 시나리오

| 시나리오 | 입력 | 기대 결과 |
|----------|------|----------|
| 정상 생성 | 유효한 데이터 | 201 Created |
| 중복 생성 | 기존 데이터 | 409 Conflict |
| 권한 없음 | 타인 데이터 | 403 Forbidden |

---

## Phase 2: 태스크 분해

**전제**: Phase 1 완료

→ `tasks.md` 생성은 `/tasks` 프롬프트 사용

---

## 다음 단계

1. [ ] Phase 0 연구 수행 → `research.md`
2. [ ] Phase 1 설계 완료 → `data-model.md`
3. [ ] 원칙 체크 재확인
4. [ ] 태스크 분해 → `tasks.md`
5. [ ] 구현 시작
```

---

## 작성 규칙

### 1. 원칙 체크 우선

- 설계 전 Gate 통과 확인
- 위반 시 **반드시** 복잡도 추적 테이블에 정당화

### 2. 기존 코드 참조

- 유사 기능 코드 먼저 분석
- 동일 패턴/구조 사용
- 새 패턴 도입 시 장점 + 승인 필요

### 3. 증거 기반

- 연구 결론에 근거 명시
- "~일 것 같음" 금지
- 불확실하면 연구 항목에 추가

---

## 품질 체크리스트

계획 완료 전 확인:

- [ ] 기능 명세의 모든 요구사항 커버
- [ ] 원칙 체크 Gate 모두 통과 (또는 정당화됨)
- [ ] 프로젝트 구조가 기존 코드와 일관됨
- [ ] API 계약이 프로젝트 표준 따름
- [ ] 데이터 모델이 기존 스키마와 일관됨
- [ ] 검증 시나리오가 수용 기준 커버

---

## Changelog

| 날짜 | 변경 내용 |
|------|----------|
| 2026-02-05 | 범용화 - SSOO 특화 내용을 인스트럭션 참조로 변경 |
| 2026-02-04 | 초기 버전 - SDD 기반 구현 계획 템플릿 |
