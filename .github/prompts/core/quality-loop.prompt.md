# 품질 수렴 루프 (Quality Convergence Loop)

> 모든 작업에서 100% 품질 달성을 위한 반복 점검 프로세스

---

## 핵심 원리

```
측정 → 분석 → 개선 → 재측정 → ... → 100% 수렴
```

**수렴 조건**: 목표 품질 기준 100% 충족 시까지 반복

---

## 1단계: 품질 측정

### 측정 항목

모든 작업에서 다음 항목을 정량적으로 측정:

| 카테고리 | 측정 항목 | 목표 | 측정 방법 |
|----------|----------|------|----------|
| **구조** | .github 필수 파일 | 100% | sdd-verify.js |
| **구조** | instructions 매핑 | 100% | sdd-verify.js |
| **코드** | any 타입 사용 | 0개 | grep 검색 |
| **코드** | 와일드카드 export | 0개 | grep 검색 |
| **코드** | 빌드 성공 | 100% | pnpm build |
| **코드** | 테스트 통과 | 100% | pnpm test |
| **문서** | kebab-case 파일명 | 100% | sdd-verify.js |
| **문서** | 필수 섹션 존재 | 100% | 패턴 검색 |

### 측정 명령어

```bash
# 전체 측정
node .github/scripts/sdd-verify.js

# 빠른 측정 (빌드 제외)
node .github/scripts/sdd-verify.js --quick

# 개별 측정
pnpm build        # 빌드 검증
pnpm test         # 테스트 검증
pnpm lint         # 린트 검증
```

### 측정 결과 기록

```markdown
## 품질 측정 결과

| 항목 | 현재 | 목표 | Gap |
|------|------|------|-----|
| 구조 검증 | 8/8 | 8/8 | 0 |
| any 타입 | 4개 | 0개 | -4 |
| 빌드 | ✅ | ✅ | 0 |
| 테스트 | 45/50 | 50/50 | -5 |

**품질 점수**: 85%
**수렴 상태**: 미달성 (15% gap)
```

---

## 2단계: Gap 분석

### 분석 템플릿

각 미달성 항목에 대해:

```markdown
### Gap: [항목명]

**현재 상태**: [측정값]
**목표 상태**: [목표값]
**Gap 크기**: [차이]

**원인 분석**:
1. [근본 원인 1]
2. [근본 원인 2]

**영향 범위**:
- 파일: [영향받는 파일 목록]
- 모듈: [영향받는 모듈]

**해결 방안**:
1. [구체적 액션 1]
2. [구체적 액션 2]

**예상 소요**: [시간/복잡도]
```

### 우선순위 결정

| 우선순위 | 기준 | 예시 |
|----------|------|------|
| **P0** | 빌드/배포 차단 | 빌드 실패, 보안 취약점 |
| **P1** | 핵심 기능 영향 | 테스트 실패, 타입 오류 |
| **P2** | 품질 저하 | any 타입, 린트 경고 |
| **P3** | 개선 사항 | 문서 보완, 리팩토링 |

---

## 3단계: 개선 실행

### 실행 원칙

1. **한 번에 하나씩** - 병렬 수정 금지
2. **즉시 검증** - 수정 후 바로 재측정
3. **롤백 준비** - 문제 시 즉시 복원
4. **문서화** - 변경 내용 기록

### 실행 체크리스트

```markdown
## 개선 실행 체크리스트

### 수정 전
- [ ] 현재 상태 백업/커밋
- [ ] 영향 범위 확인
- [ ] 수정 계획 수립

### 수정 중
- [ ] 한 항목씩 순차 수정
- [ ] 각 수정 후 로컬 검증

### 수정 후
- [ ] 전체 측정 재실행
- [ ] 품질 점수 기록
- [ ] 문서 업데이트
- [ ] 커밋
```

---

## 4단계: 재측정 및 수렴 판정

### 수렴 판정 기준

```
품질 점수 = (통과 항목 / 전체 항목) × 100

수렴 상태:
- 100%: ✅ 완료
- 95-99%: ⚠️ 경미한 이슈 (경고만 있음)
- 90-94%: 🔶 개선 필요
- <90%: 🔴 즉시 조치 필요
```

### 수렴 루프 종료 조건

1. **품질 점수 100%** 달성
2. **또는** 남은 이슈가 모두 P3 이하 + 명시적 승인

### 미수렴 시 처리

```
if (품질 점수 < 100%) {
    1. Gap 분석으로 돌아감
    2. 새로운 개선 계획 수립
    3. 다시 실행
    4. 재측정
    // 100% 달성까지 반복
}
```

---

## 적용 시점

### 필수 적용

| 시점 | 목표 점수 |
|------|----------|
| PR 생성 전 | 95% 이상 |
| 머지 전 | 100% |
| 릴리스 전 | 100% |
| 스프린트 완료 | 100% |

### 권장 적용

| 시점 | 목표 점수 |
|------|----------|
| 기능 구현 완료 | 90% 이상 |
| 리팩토링 완료 | 100% |
| 문서 업데이트 | 100% |

---

## AI 협업 시 사용법

### 프롬프트 예시

```
@workspace 

현재 품질 상태를 측정하고 100% 달성까지 수렴 루프를 실행해줘.

## 측정 범위
- 전체 / [특정 모듈]

## 현재 알려진 이슈
- (있다면 기술)

## 제약 조건
- (있다면 기술)
```

### AI 응답 기대 형식

```markdown
## 품질 측정 결과

| 항목 | 현재 | 목표 | 상태 |
|------|------|------|------|
| ... | ... | ... | ✅/❌ |

**품질 점수**: N%

## Gap 분석
### Gap 1: [항목]
- 원인: ...
- 해결: ...

## 개선 계획
1. [액션 1]
2. [액션 2]

## 실행
(수정 진행)

## 재측정 결과
**품질 점수**: N% → M%
**수렴 상태**: [달성/미달성]

(미달성 시 반복)
```

---

## Changelog

| 날짜 | 변경 내용 |
|------|----------|
| 2026-02-05 | 초기 버전 생성 |
