# ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë¶„ë¥˜ ë° ì„¤ê³„

**ì‘ì—…**: Phase 1.3.2 - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë¶„ë¥˜ ë° ì„¤ê³„  
**ë‚ ì§œ**: 2025-10-28  
**ìƒíƒœ**: ğŸ”„ ì§„í–‰ì¤‘

---

## ğŸ“Š ì„¤ê³„ ì›ì¹™

### 1. **ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)**
ê° ìœ í‹¸ë¦¬í‹°ëŠ” í•˜ë‚˜ì˜ ëª…í™•í•œ ì±…ì„ë§Œ ê°€ì§

### 2. **ìˆœìˆ˜ í•¨ìˆ˜ ìš°ì„ **
ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ì—†ëŠ” ì˜ˆì¸¡ ê°€ëŠ¥í•œ í•¨ìˆ˜

### 3. **íƒ€ì… ì•ˆì „ì„±**
ì—„ê²©í•œ TypeScript íƒ€ì… ì •ì˜

### 4. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**
ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ì‰¬ìš´ êµ¬ì¡°

---

## ğŸ—‚ï¸ ìœ í‹¸ë¦¬í‹° ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜

### ğŸ“ **utils/pathUtils.ts** - ê²½ë¡œ ì²˜ë¦¬ (1ìˆœìœ„)
**ëª©ì **: í¬ë¡œìŠ¤ í”Œë«í¼ ê²½ë¡œ í˜¸í™˜ì„± ë° ê²½ë¡œ ì¡°ì‘

```typescript
/**
 * ê²½ë¡œë¥¼ ì •ê·œí™”í•˜ì—¬ í¬ë¡œìŠ¤ í”Œë«í¼ í˜¸í™˜ì„± ë³´ì¥
 * Windowsì˜ ë°±ìŠ¬ë˜ì‹œë¥¼ Unix ìŠ¤íƒ€ì¼ ìŠ¬ë˜ì‹œë¡œ ë³€í™˜
 */
export function normalizePath(path: string): string;

/**
 * ê²½ë¡œê°€ ìœ íš¨í•œ í˜•ì‹ì¸ì§€ ê²€ì¦
 */
export function isValidPath(path: string): boolean;

/**
 * ìƒëŒ€ ê²½ë¡œë¥¼ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜
 */
export function resolveRelativePath(basePath: string, relativePath: string): string;

/**
 * ê²½ë¡œì—ì„œ íŒŒì¼ëª… ì¶”ì¶œ
 */
export function getFileName(path: string): string;

/**
 * ê²½ë¡œì—ì„œ ë””ë ‰í† ë¦¬ ê²½ë¡œ ì¶”ì¶œ
 */
export function getDirectoryPath(path: string): string;

/**
 * ë‘ ê²½ë¡œë¥¼ ì•ˆì „í•˜ê²Œ ê²°í•©
 */
export function joinPaths(...paths: string[]): string;
```

### ğŸ“ **utils/fileUtils.ts** - íŒŒì¼ ì²˜ë¦¬ (2ìˆœìœ„)
**ëª©ì **: íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° ë° ê²€ì¦

```typescript
/**
 * íŒŒì¼ì´ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì¸ì§€ í™•ì¸
 */
export function isMarkdownFile(filename: string): boolean;

/**
 * íŒŒì¼ëª…ì— .md í™•ì¥ì ì¶”ê°€ (ì—†ëŠ” ê²½ìš°ì—ë§Œ)
 */
export function ensureMarkdownExtension(filename: string): string;

/**
 * íŒŒì¼ í™•ì¥ì ì¶”ì¶œ
 */
export function getFileExtension(filename: string): string;

/**
 * íŒŒì¼ëª…ì—ì„œ í™•ì¥ì ì œê±°
 */
export function removeFileExtension(filename: string): string;

/**
 * íŒŒì¼ëª…ì´ ìœ íš¨í•œì§€ ê²€ì¦
 */
export function isValidFileName(filename: string): boolean;

/**
 * íŒŒì¼ í¬ê¸°ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜
 */
export function formatFileSize(bytes: number): string;

/**
 * MIME íƒ€ì… ì¶”ì¸¡
 */
export function getMimeType(filename: string): string;
```

### ğŸ“ **utils/treeUtils.ts** - íŠ¸ë¦¬ ì¡°ì‘ (3ìˆœìœ„)
**ëª©ì **: íŒŒì¼ íŠ¸ë¦¬ ë°ì´í„° êµ¬ì¡° ì¡°ì‘

```typescript
import type { FileNode } from '@/types/wiki';

/**
 * íŠ¸ë¦¬ì—ì„œ íŠ¹ì • ê²½ë¡œì˜ ë…¸ë“œ ê²€ìƒ‰
 */
export function findNodeByPath(tree: FileNode[], path: string): FileNode | null;

/**
 * íŠ¸ë¦¬ë¥¼ í‰ë©´ ë°°ì—´ë¡œ ë³€í™˜
 */
export function flattenTree(tree: FileNode[]): FileNode[];

/**
 * íŠ¸ë¦¬ ì •ë ¬ (í´ë” ë¨¼ì €, ê·¸ ë‹¤ìŒ íŒŒì¼)
 */
export function sortTree(tree: FileNode[]): FileNode[];

/**
 * íŠ¸ë¦¬ì—ì„œ ê²€ìƒ‰ (ì´ë¦„ìœ¼ë¡œ)
 */
export function searchTree(tree: FileNode[], query: string): FileNode[];

/**
 * ë…¸ë“œì˜ ëª¨ë“  ë¶€ëª¨ ê²½ë¡œ ì¶”ì¶œ
 */
export function getParentPaths(path: string): string[];

/**
 * íŠ¸ë¦¬ ê¹Šì´ ê³„ì‚°
 */
export function calculateTreeDepth(tree: FileNode[]): number;

/**
 * íŠ¹ì • ë…¸ë“œì˜ ìì‹ ê°œìˆ˜ ê³„ì‚°
 */
export function countChildren(node: FileNode): number;
```

### ğŸ“ **utils/validationUtils.ts** - ìœ íš¨ì„± ê²€ì‚¬ (4ìˆœìœ„)
**ëª©ì **: ë‹¤ì–‘í•œ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬

```typescript
/**
 * ë¬¸ìì—´ì´ ë¹„ì–´ìˆì§€ ì•Šì€ì§€ ê²€ì‚¬
 */
export function isNotEmpty(value: string): boolean;

/**
 * íŒŒì¼ëª…ì— í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ìê°€ ìˆëŠ”ì§€ ê²€ì‚¬
 */
export function hasInvalidCharacters(filename: string): boolean;

/**
 * ê²½ë¡œ ê¹Šì´ê°€ ì œí•œì„ ì´ˆê³¼í•˜ëŠ”ì§€ ê²€ì‚¬
 */
export function isPathTooDeep(path: string, maxDepth: number = 10): boolean;

/**
 * íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í•˜ëŠ”ì§€ ê²€ì‚¬
 */
export function isFileSizeValid(size: number, maxSize: number): boolean;

/**
 * URLì´ ìœ íš¨í•œ í˜•ì‹ì¸ì§€ ê²€ì‚¬
 */
export function isValidUrl(url: string): boolean;

/**
 * ê²€ìƒ‰ ì¿¼ë¦¬ê°€ ìœ íš¨í•œì§€ ê²€ì‚¬
 */
export function isValidSearchQuery(query: string): boolean;
```

### ğŸ“ **utils/stringUtils.ts** - ë¬¸ìì—´ ì²˜ë¦¬ (5ìˆœìœ„)
**ëª©ì **: ë¬¸ìì—´ ì¡°ì‘ ë° í¬ë§·íŒ…

```typescript
/**
 * ë¬¸ìì—´ì„ URL ì¹œí™”ì ì¸ ìŠ¬ëŸ¬ê·¸ë¡œ ë³€í™˜
 */
export function slugify(text: string): string;

/**
 * ë¬¸ìì—´ truncate (ë§ì¤„ì„í‘œ ì¶”ê°€)
 */
export function truncate(text: string, maxLength: number): string;

/**
 * ëŒ€ì†Œë¬¸ìë¥¼ ë¬´ì‹œí•˜ê³  ë¬¸ìì—´ í¬í•¨ ì—¬ë¶€ ê²€ì‚¬
 */
export function includesIgnoreCase(text: string, search: string): boolean;

/**
 * ë¬¸ìì—´ì—ì„œ íŠ¹ìˆ˜ë¬¸ì ì œê±°
 */
export function removeSpecialCharacters(text: string): string;

/**
 * íŒŒìŠ¤ì¹¼ ì¼€ì´ìŠ¤ë¥¼ ì¼€ë°¥ ì¼€ì´ìŠ¤ë¡œ ë³€í™˜
 */
export function pascalToKebab(text: string): string;

/**
 * í…ìŠ¤íŠ¸ í•˜ì´ë¼ì´íŠ¸ (ê²€ìƒ‰ì–´ ê°•ì¡°)
 */
export function highlightText(text: string, query: string): string;
```

---

## ğŸ—ï¸ í´ë” êµ¬ì¡° ì„¤ê³„

```typescript
utils/
â”œâ”€â”€ index.ts              // í†µí•© export + ìœ í‹¸ë¦¬í‹° ì¬export
â”œâ”€â”€ pathUtils.ts          // ê²½ë¡œ ì²˜ë¦¬ (1ìˆœìœ„)
â”œâ”€â”€ fileUtils.ts          // íŒŒì¼ ì²˜ë¦¬ (2ìˆœìœ„)  
â”œâ”€â”€ treeUtils.ts          // íŠ¸ë¦¬ ì¡°ì‘ (3ìˆœìœ„)
â”œâ”€â”€ validationUtils.ts    // ìœ íš¨ì„± ê²€ì‚¬ (4ìˆœìœ„)
â”œâ”€â”€ stringUtils.ts        // ë¬¸ìì—´ ì²˜ë¦¬ (5ìˆœìœ„)
â””â”€â”€ constants.ts          // ê³µí†µ ìƒìˆ˜ ì •ì˜
```

### **index.ts í†µí•© Export**
```typescript
// utils/index.ts
export * from './pathUtils';
export * from './fileUtils';
export * from './treeUtils';
export * from './validationUtils';
export * from './stringUtils';
export * from './constants';

// í¸ì˜ë¥¼ ìœ„í•œ ê·¸ë£¹í™”ëœ export
export * as PathUtils from './pathUtils';
export * as FileUtils from './fileUtils';
export * as TreeUtils from './treeUtils';
export * as ValidationUtils from './validationUtils';
export * as StringUtils from './stringUtils';
```

### **constants.ts ê³µí†µ ìƒìˆ˜**
```typescript
// utils/constants.ts
export const FILE_EXTENSIONS = {
  MARKDOWN: '.md',
  TEXT: '.txt',
  JSON: '.json'
} as const;

export const PATH_SEPARATORS = {
  UNIX: '/',
  WINDOWS: '\\'
} as const;

export const INVALID_FILENAME_CHARS = ['/', '\\', ':', '*', '?', '"', '<', '>', '|'];

export const MAX_FILENAME_LENGTH = 255;
export const MAX_PATH_DEPTH = 10;
export const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB

export const MIME_TYPES = {
  'md': 'text/markdown',
  'txt': 'text/plain',
  'json': 'application/json'
} as const;
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ êµ¬í˜„ ê³„íš

### **Phase 1.3.3: pathUtils êµ¬í˜„** (ìµœìš°ì„ )
- âœ… ê°€ì¥ ë§ì€ ì¤‘ë³µ ì œê±° (17ê°œ)
- âœ… ê°€ì¥ ì•ˆì „í•¨ (ìˆœìˆ˜ í•¨ìˆ˜)
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥

### **Phase 1.3.4: fileUtils êµ¬í˜„**
- âœ… íŒŒì¼ ì²˜ë¦¬ ë¡œì§ í‘œì¤€í™”
- âœ… í™•ì¥ì ê²€ì‚¬ í†µí•©

### **Phase 1.3.5: treeUtils êµ¬í˜„**
- âœ… íŠ¸ë¦¬ ì¡°ì‘ ë¡œì§ í†µí•©
- âœ… ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”

### **Phase 1.3.6: validation + string êµ¬í˜„**
- âœ… ë‚˜ë¨¸ì§€ ìœ í‹¸ë¦¬í‹° ì™„ì„±
- âœ… ì „ì²´ ìœ í‹¸ë¦¬í‹° ì‹œìŠ¤í…œ ì™„ì„±

---

## ğŸ” ê° ìœ í‹¸ë¦¬í‹°ì˜ í˜„ì¬ ì‚¬ìš©ì²˜ ë§¤í•‘

### **pathUtils ëŒ€ìƒ ì½”ë“œ**
```typescript
// í˜„ì¬ (17ê³³ì—ì„œ ì‚¬ìš©)
path.replace(/\\/g, '/');
path.replace(/\\\\/g, "/");

// ë³€ê²½ í›„
import { normalizePath } from '@/utils/pathUtils';
normalizePath(path);
```

### **fileUtils ëŒ€ìƒ ì½”ë“œ**
```typescript
// í˜„ì¬ (8ê³³ì—ì„œ ì‚¬ìš©)
fileName.endsWith('.md')
name?.endsWith(".md") ? name : `${name}.md`

// ë³€ê²½ í›„  
import { isMarkdownFile, ensureMarkdownExtension } from '@/utils/fileUtils';
isMarkdownFile(fileName);
ensureMarkdownExtension(name);
```

---

## âœ… ì„¤ê³„ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ì¤‘ë³µ ë¡œì§ ë¶„ì„ ê²°ê³¼ ë°˜ì˜
- [x] ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì„¤ê³„
- [x] íƒ€ì… ì•ˆì „ì„± ê³ ë ¤
- [x] ìˆœìˆ˜ í•¨ìˆ˜ ì›ì¹™ ì ìš©
- [x] í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í™•ë³´
- [x] ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± ê³ ë ¤
- [x] í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° ì„¤ê³„

**ë‹¤ìŒ ì‘ì—…**: 1.3.3 pathUtils êµ¬í˜„ ë° ì ìš©