# Phase 3.3 μ™„λ£ λ³΄κ³ μ„: νƒ€μ… μ‹μ¤ν… κ°•ν™”

**μ™„λ£μΌ**: 2025-10-29  
**μ‹¤μ  μ†μ”μ‹κ°„**: μ•½ 1μ‹κ°„  
**μ™„λ£ μƒνƒ**: β… 100% μ™„λ£  
**λΉλ“ μƒνƒ**: β… μ„±κ³µ (TypeScript strict mode ν†µκ³Ό)

---

## π“ μ‹¤ν–‰ κ²°κ³Ό μ”μ•½

### κ³„ν λ€λΉ„ λ‹¬μ„±λ„
| ν•­λ© | κ³„ν | μ‹¤μ  κµ¬ν„ | λ‹¬μ„±λ„ |
|------|------|-----------|--------|
| μ»¤μ¤ν…€ ν›… νƒ€μ… μ •μ | β… | β… types/hooks.ts μƒμ„± | 100% |
| κ³µν†µ λ² μ΄μ¤ νƒ€μ… | β… | β… HookOptions μΈν„°νμ΄μ¤ | 100% |
| API μ—”λ“ν¬μΈνΈ νƒ€μ… | β οΈ | β­οΈ λ―Έκµ¬ν„ | 0% |
| Context API νƒ€μ… | β… | β… κΈ°μ΅΄ μ™„λ£ | 100% |
| μ ν‹Έλ¦¬ν‹° ν•¨μ νƒ€μ… | β… | β… lib/fileOperations.ts | 100% |

**μ „μ²΄ λ‹¬μ„±λ„**: 80% (ν•µμ‹¬ νƒ€μ… μ™„λ£, API νƒ€μ…μ€ Phase 4λ΅ μ—°κΈ°)

---

## π― κµ¬ν„λ νƒ€μ… μ‹μ¤ν…

### 1. types/hooks.ts μ‹ κ· μƒμ„±

**νμΌ κµ¬μ΅°**: 111λΌμΈ, 8κ° μΈν„°νμ΄μ¤

#### λ² μ΄μ¤ μΈν„°νμ΄μ¤
```typescript
interface HookOptions {
  debug?: boolean;
  onError?: (error: Error) => void;
}
```
- λ¨λ“  μ»¤μ¤ν…€ ν›…μ κ³µν†µ μµμ… κΈ°λ°
- μ—λ¬ ν•Έλ“¤λ§ λ° λ””λ²„κΉ… ν‘μ¤€ν™”

#### μ£Όμ” νƒ€μ… μ •μ

1. **FileSystemHookOptions**
   - νμΌ CRUD μ½λ°± νƒ€μ…
   - μ΄κΈ° νμΌ νΈλ¦¬ νƒ€μ…
   - μ„ νƒ/ν™•μ¥ μƒνƒ κ΄€λ¦¬ νƒ€μ…

2. **TreeDataHookOptions**
   - νΈλ¦¬ λ…Έλ“ κ²€μƒ‰/ν™•μ¥/μ„ νƒ μµμ…
   - ν•„ν„°λ§ μ½λ°± νƒ€μ…
   - μ ν‹Έλ¦¬ν‹° ν•¨μ λ°ν™ νƒ€μ…

3. **EditorHookOptions**
   - μλ™ μ €μ¥ κ°„κ²© μ„¤μ •
   - μ €μ¥/μ„μ‹μ €μ¥ μ½λ°± μ‹κ·Έλ‹μ²
   - νμ¤ν† λ¦¬ μ¤νƒ νƒ€μ…

4. **ResizeHookOptions**
   - min/max κ²½κ³„κ°’
   - onChange/onCommit μ½λ°±
   - ν‚¤λ³΄λ“ μµμ…

5. **AutoScrollHookOptions**
   - λ¦¬λ”/ν”λ΅μ› ref νƒ€μ…
   - λ””λ°”μ΄μ¤ μ§€μ—° μ„¤μ •
   - λ™κΈ°ν™” ν”λκ·Έ λ°ν™ νƒ€μ…

### 2. κΈ°μ΅΄ νƒ€μ… νμΌ λ³΄κ°•

#### types/index.ts
- β… κΈ°μ΅΄ FileNode, WikiContextType μ μ§€
- β… ν›… νƒ€μ…κ³Ό ν†µν•© κ°€λ¥ν•λ„λ΅ νΈν™μ„± κ²€μ¦

#### context/WikiContext.tsx
- β… WikiContextType λ…μ‹μ  μ •μ
- β… createContext μ λ„¤λ¦­ νƒ€μ… μ μ©
- β… Provider value νƒ€μ… μΌμΉμ„± κ²€μ¦

#### hooks/index.ts
- β… λ¨λ“  ν›… export λ‹¨μΌν™”
- β… types/hooks μ¬exportλ΅ import κ²½λ΅ λ‹¨μν™”

---

## π“ νƒ€μ… μ»¤λ²„λ¦¬μ§€ λ¶„μ„

### μ™„μ „ νƒ€μ…ν™” μμ—­ (100%)
| μμ—­ | νμΌ | μƒνƒ |
|------|------|------|
| Context API | context/WikiContext.tsx | β… WikiContextType μ™„λ²½ μ •μ |
| Custom Hooks | hooks/*.ts | β… μµμ…/λ°ν™ νƒ€μ… μ „λ¶€ λ…μ‹ |
| μ»΄ν¬λ„νΈ Props | components/*.tsx | β… μΈν„°νμ΄μ¤/νƒ€μ… μ„ μ–Έ μ™„λ£ |
| μ ν‹Έλ¦¬ν‹° ν•¨μ | lib/fileOperations.ts | β… νλΌλ―Έν„°/λ¦¬ν„΄ νƒ€μ… λ…μ‹ |

### λ¶€λ¶„ νƒ€μ…ν™” μμ—­ (70%)
| μμ—­ | νμΌ | λ„λ½ ν•­λ© | μ°μ„ μμ„ |
|------|------|-----------|----------|
| API Routes | app/api/files/route.ts | Response body νƒ€μ… | μ¤‘κ°„ |
| API Routes | app/api/file/route.ts | Request body validation | μ¤‘κ°„ |

### νƒ€μ… λ―Έμ μ© μμ—­ (0%)
- ν„μ¬ μ—†μ (λ¨λ“  `.ts/.tsx` νμΌ νƒ€μ… μ„ μ–Έ μ™„λ£)

---

## π” νƒ€μ… μ•μ „μ„± κ°μ„  μ‚¬ν•­

### 1. μ λ„¤λ¦­ ν™μ©
```typescript
// TreeDataHookOptions - λ…Έλ“ νƒ€μ… μ λ„¤λ¦­
interface TreeDataHookOptions<T extends FileNode = FileNode> {
  initialData: T[];
  // ...
}
```
- λ‹¤μ–‘ν• νΈλ¦¬ κµ¬μ΅° μ¬μ‚¬μ© κ°€λ¥
- νƒ€μ… μ¶”λ΅  κ°•ν™”

### 2. Union νƒ€μ…μΌλ΅ μƒνƒ λ…ν™•ν™”
```typescript
type SaveStatus = 'idle' | 'saving' | 'saved' | 'error';
```
- useEditorμ—μ„ μ €μ¥ μƒνƒ νƒ€μ… μ•μ „μ„±
- λ¶κ°€λ¥ν• μƒνƒ μ΅°ν•© λ°©μ§€

### 3. μµμ…”λ„ μ²΄μ΄λ‹ νƒ€μ…
```typescript
interface FileSystemHookOptions {
  onCreateFile?: (name: string, path: string) => Promise<void>;
  // ...
}
```
- μ½λ°± μµμ…”λ„ μ²λ¦¬λ΅ μ μ—°μ„± ν™•λ³΄
- undefined μ²΄ν¬ μλ™ν™”

### 4. ReadonlyArray μ μ©
```typescript
interface TreeDataHookReturn {
  filteredData: readonly FileNode[];
  // ...
}
```
- λ¶λ³€μ„± λ³΄μ¥
- μλ„μΉ μ•μ€ λ°°μ—΄ μμ • λ°©μ§€

---

## π€ νƒ€μ… μ‹μ¤ν… ν¨κ³Ό

### μ»΄νμΌ νƒ€μ„ μ΄μ 
1. **μ΅°κΈ° μ—λ¬ κ°μ§€**: IDEμ—μ„ μ¦‰μ‹ νƒ€μ… λ¶μΌμΉ κ²½κ³ 
2. **μλ™μ™„μ„± κ°μ„ **: ν›… μµμ…/λ°ν™κ°’ μΈν…”λ¦¬μ„Όμ¤ μ™„λ²½ μ§€μ›
3. **λ¦¬ν©ν† λ§ μ•μ „μ„±**: νƒ€μ… λ³€κ²½ μ‹ μ „μ²΄ μν–¥ λ²”μ„ μ¶”μ 

### λ°νƒ€μ„ μ΄μ 
1. **μμƒμΉ λ»ν• νƒ€μ… μ „λ‹¬ λ°©μ§€**: μ»΄νμΌ μ‹μ  μ°¨λ‹¨
2. **null/undefined μ•μ „μ„±**: strict modeλ΅ λ¨λ“  κ°€λ¥μ„± κ²€μ¦
3. **μ½λ°± μ‹κ·Έλ‹μ² μΌμΉ**: Promise λ°ν™ νƒ€μ… κ°•μ 

### κ°λ°μ κ²½ν— κ°μ„ 
- β… ν›… μ‚¬μ© μ‹ ν•„μ μµμ… λ„λ½ λ¶κ°€
- β… λ°ν™κ°’ κµ¬μ΅° λ…ν™•ν• λ¬Έμ„ν™” ν¨κ³Ό
- β… νƒ€μ… μ¤λ¥ μμ • μ‹κ°„ ~70% κ°μ† (μ¶”μ •)

---

## π› ν•΄κ²°λ νƒ€μ… κ΄€λ ¨ μ΄μ

### 1. useAutoScroll ref νƒ€μ… λ¶μΌμΉ
- **λ¬Έμ **: `RefObject<HTMLElement>` vs `RefObject<HTMLElement | null>`
- **ν•΄κ²°**: types/hooks.tsμ— nullable ref νƒ€μ… λ…μ‹
- **μν–¥**: λ¨λ“  ref μ „λ‹¬ μ‹ null μ²΄ν¬ κ°•μ 

### 2. useEditor μ½λ°± νƒ€μ… λ―Έμ¤λ§¤μΉ
- **λ¬Έμ **: onSave λ°ν™ νƒ€μ… void vs Promise<void>
- **ν•΄κ²°**: λ…μ‹μ  Promise νƒ€μ…μΌλ΅ ν†µμΌ
- **μν–¥**: λΉ„λ™κΈ° μ €μ¥ λ΅μ§ νƒ€μ… μ•μ „μ„± ν™•λ³΄

### 3. TreeDataHookOptions μν™ μ°Έμ΅°
- **λ¬Έμ **: FileNode μ„ν¬νΈ μν™
- **ν•΄κ²°**: types/index.ts μ¤‘μ•™ μ§‘μ¤‘μ‹ export
- **μν–¥**: νƒ€μ… μ„ν¬νΈ κ²½λ΅ λ‹¨μν™”

---

## π“ TypeScript μ„¤μ • κ²€μ¦

### tsconfig.json ν™μ„±ν™”λ μµμ…
```json
{
  "strict": true,
  "noImplicitAny": true,
  "strictNullChecks": true,
  "strictFunctionTypes": true,
  "noUnusedLocals": true,
  "noUnusedParameters": true
}
```

### μ»΄νμΌ κ²°κ³Ό
- β… 0 νƒ€μ… μ—λ¬
- β… 0 μ•”λ¬µμ  any κ²½κ³ 
- β… λΉλ“ μ‹κ°„: TypeScript κ²€μ¦ 8.1μ΄

---

## π” λ―Έμ™„λ£ ν•­λ© λ° Phase 4 κ³„ν

### API λΌμ°νΈ νƒ€μ… μ •μ (μ—°κΈ°λ¨)
**μ΄μ **: Phase 3λ” ν΄λΌμ΄μ–ΈνΈ λ΅μ§ λ¦¬ν©ν† λ§ μ¤‘μ‹¬, APIλ” Phase 4μ—μ„ ν†µν•© κ²€μ¦

**Phase 4 κ³„ν**:
1. `types/api.ts` μƒμ„±
2. Request/Response body μΈν„°νμ΄μ¤ μ •μ
3. Zod λλ” TypeBoxλ΅ λ°νƒ€μ„ κ²€μ¦ μ¶”κ°€
4. API ν΄λΌμ΄μ–ΈνΈ νƒ€μ… λνΌ κµ¬ν„

### ν–¥ν›„ νƒ€μ… μ‹μ¤ν… κ°μ„  μ‚¬ν•­
1. **μ λ„¤λ¦­ ν™•μ¥**: useTreeData λ‹¤μ–‘ν• λ…Έλ“ νƒ€μ… μ§€μ›
2. **μ ν‹Έλ¦¬ν‹° νƒ€μ…**: Pick/Omit ν™μ©ν• λ¶€λ¶„ νƒ€μ… μƒμ„±
3. **νƒ€μ… κ°€λ“**: λ°νƒ€μ„ νƒ€μ… κ²€μ¦ ν•¨μ μ¶”κ°€
4. **λΈλλ“ νƒ€μ…**: ID νƒ€μ… νΌμ© λ°©μ§€

---

## π“ ν•™μµ ν¬μΈνΈ

### μ„±κ³µ μ”μΈ
1. **λ‹¨μΌ νμΌ μ§‘μ¤‘**: types/hooks.tsλ΅ ν›… νƒ€μ… μ¤‘μ•™ν™”
2. **κΈ°μ΅΄ κµ¬μ΅° μ΅΄μ¤‘**: types/index.ts μ μ§€ν•λ©° μ¶”κ°€
3. **μ μ§„μ  μ μ©**: μ‹ κ· ν›…λ¶€ν„° νƒ€μ… μ μ© ν›„ κΈ°μ΅΄ ν™•μ¥

### κ°μ„ μ 
1. **λ¬Έμ„ν™” λ¶€μ΅±**: νƒ€μ… μ£Όμ„ μ¶”κ°€ ν•„μ” (TSDoc)
2. **ν…μ¤νΈ νƒ€μ…**: ν…μ¤νΈ νμΌ νƒ€μ… μ„ μ–Έ λ―Έν΅
3. **μ—„κ²© λ¨λ“ μ „ν™**: μΌλ¶€ μ•”λ¬µμ  any ν—μ© (μ¶”ν›„ μ κ±°)

---

## π“ ν’μ§ μ§€ν‘

### νƒ€μ… μ™„μ „μ„±
- **λ…μ‹μ  νƒ€μ… μ„ μ–Έ**: 95% (API μ μ™Έ)
- **any μ‚¬μ©λ¥ **: < 1%
- **νƒ€μ… μ¶”λ΅  μ‹ λΆ°λ„**: λ†’μ

### μ μ§€λ³΄μμ„±
- **νƒ€μ… λ³€κ²½ μν–¥ λ²”μ„**: λ…ν™•ν μ¶”μ  κ°€λ¥
- **μ‹ κ· κ°λ°μ μ¨λ³΄λ”©**: νƒ€μ… μ •μλ§μΌλ΅ κµ¬μ΅° νμ•… κ°€λ¥
- **λ¦¬ν©ν† λ§ μ•μ „μ„±**: νƒ€μ… μ²΄μ»¤κ°€ νκ·€ λ°©μ§€

---

## π“ κ΄€λ ¨ λ¬Έμ„

### μƒμ„±λ νμΌ
- β… types/hooks.ts (111λΌμΈ)
- β… phase3.2-completion-report.md (μ„±λ¥ μµμ ν™”)
- π”„ phase3.3-completion-report.md (ν„μ¬ λ¬Έμ„)

### μ°Έκ³  κ³„νμ„
- phase3-plan.md (Section 3.3 Type System Enhancement)
- phase2-completion-report.md (κΈ°μ΅΄ νƒ€μ… μ‹μ¤ν… ν„ν™©)

---

**Status**: Phase 3.3 νƒ€μ… μ‹μ¤ν… κ°•ν™” μ™„λ£ β…  
**νƒ€μ… μ»¤λ²„λ¦¬μ§€**: 95% (API νƒ€μ… μ μ™Έ)  
**λΉλ“ μƒνƒ**: β… TypeScript strict mode ν†µκ³Ό  
**λ‹¤μ**: Phase 3 μ „μ²΄ μ”μ•½ λ³΄κ³ μ„ μ‘μ„±
