# 🎯 WikiPage 컴포넌트 분할 상세 계획

**작업명**: 1.1 WikiPage 컴포넌트 분할  
**우선순위**: 🔴 높음 (핵심 구조 개선)  
**예상 기간**: 2-3일  
**계획 수립일**: 2025-10-28  

---

## 📊 현재 상황 분석

### 🚨 **문제점**
- **WikiPage.tsx**: 1,076줄의 거대한 컴포넌트
- **책임 과다**: 8가지 주요 책임을 한 컴포넌트가 담당
- **상태 복잡성**: 11개의 useState 훅이 한 곳에 집중
- **유지보수 어려움**: 새 기능 추가 시 복잡성 증가

### 📈 **리스크 평가**
- **영향도**: ⭐⭐⭐⭐⭐ (매우 높음) - 핵심 컴포넌트
- **복잡도**: ⭐⭐⭐⭐⭐ (매우 높음) - 상태 의존성 복잡
- **리스크**: 🔴 높음 - 기능 손실 가능성

---

## 🎯 분할 목표

### **분할 대상 구조**
```tsx
WikiPage (1,076줄) → 분할
├── WikiLayout (레이아웃 관리)
├── FileExplorer (파일 트리 영역)
├── Editor (에디터 영역)
├── Toolbar (도구 모음)
└── StatusBar (상태 표시)
```

### **각 컴포넌트별 책임**

#### **1. WikiLayout**
- 전체 레이아웃 구조 관리
- 사이드바 리사이징 로직
- 반응형 레이아웃 처리
- **예상 크기**: ~150줄

#### **2. FileExplorer**  
- 파일 트리 렌더링
- 파일/폴더 CRUD 작업
- 컨텍스트 메뉴 관리
- 검색 기능
- **예상 크기**: ~300줄

#### **3. Editor**
- 마크다운 에디터 로직
- 파일 내용 편집
- 저장/로드 기능
- 에디터 상태 관리
- **예상 크기**: ~250줄

#### **4. Toolbar**
- 상단 도구 모음
- 파일 작업 버튼들
- 검색 입력
- 설정 옵션
- **예상 크기**: ~100줄

#### **5. StatusBar**
- 하단 상태 표시
- 현재 파일 정보
- 저장 상태 표시
- **예상 크기**: ~50줄

---

## 📋 단계별 실행 계획

### **1단계: 분석 및 설계 (0.5일)**

#### **1.1 현재 WikiPage 구조 분석**
- [ ] 1,076줄 코드 상세 분석
- [ ] 11개 useState 훅 의존성 매핑
- [ ] 함수별 책임 분류
- [ ] 상태 흐름 다이어그램 작성

#### **1.2 컴포넌트 분할 설계**
- [ ] 각 컴포넌트 인터페이스 설계
- [ ] Props/State 전달 방식 설계
- [ ] 이벤트 처리 방식 설계
- [ ] 상태 공유 전략 수립

### **2단계: 기반 구조 생성 (0.5일)**

#### **2.1 새 컴포넌트 파일 생성**
- [ ] `components/wiki/WikiLayout.tsx`
- [ ] `components/wiki/FileExplorer.tsx`  
- [ ] `components/wiki/Editor.tsx`
- [ ] `components/wiki/Toolbar.tsx`
- [ ] `components/wiki/StatusBar.tsx`

#### **2.2 기본 구조 및 타입 정의**
- [ ] 각 컴포넌트 기본 구조 생성
- [ ] Props 인터페이스 정의
- [ ] 기본 JSX 마크업 작성

### **3단계: 단계별 분할 실행 (1일)**

#### **3.1 WikiLayout 분할**
- [ ] 레이아웃 관련 코드 추출
- [ ] 리사이징 로직 이동
- [ ] 기본 레이아웃 테스트

#### **3.2 StatusBar 분할** 
- [ ] 상태 표시 로직 추출
- [ ] 파일 정보 표시 기능 이동
- [ ] 상태바 테스트

#### **3.3 Toolbar 분할**
- [ ] 상단 도구 모음 로직 추출
- [ ] 버튼 이벤트 처리 이동
- [ ] 도구 모음 테스트

### **4단계: 핵심 컴포넌트 분할 (1일)**

#### **4.1 FileExplorer 분할**
- [ ] 파일 트리 로직 추출
- [ ] CRUD 작업 이동
- [ ] 컨텍스트 메뉴 이동
- [ ] 파일 탐색기 테스트

#### **4.2 Editor 분할**
- [ ] 에디터 관련 로직 추출
- [ ] 파일 편집 기능 이동
- [ ] 저장/로드 로직 이동
- [ ] 에디터 테스트

### **5단계: 통합 및 테스트 (0.5일)**

#### **5.1 컴포넌트 통합**
- [ ] WikiPage에서 새 컴포넌트들 조합
- [ ] Props 전달 확인
- [ ] 이벤트 연결 확인

#### **5.2 전체 기능 테스트**
- [ ] 파일 CRUD 작업 테스트
- [ ] 에디터 기능 테스트
- [ ] 레이아웃 반응성 테스트
- [ ] 상태 동기화 테스트

---

## 🛡️ 안전성 보장 방안

### **점진적 분할 전략**
1. **백워드 호환성 유지**: 기존 WikiPage를 완전히 삭제하지 않고 단계적 이동
2. **기능 플래그**: 새 컴포넌트와 기존 컴포넌트 간 전환 가능한 플래그 설정
3. **롤백 준비**: 각 단계마다 Git 커밋으로 롤백 지점 확보

### **테스트 전략**
1. **단위 테스트**: 각 분할된 컴포넌트별 독립 테스트
2. **통합 테스트**: 컴포넌트 간 연동 테스트
3. **E2E 테스트**: 전체 사용자 시나리오 테스트

### **품질 검증**
1. **코드 리뷰**: 각 단계별 코드 품질 검증
2. **성능 테스트**: 분할 후 성능 저하 없음 확인
3. **사용성 테스트**: 기존과 동일한 사용자 경험 보장

---

## 📊 예상 성과

### **정량적 개선**
- **파일 크기**: 1,076줄 → 5개 파일 (평균 ~170줄)
- **컴포넌트당 책임**: 8개 → 1-2개로 단순화
- **useState 개수**: 11개 → 컴포넌트당 2-3개로 분산

### **정성적 개선**
- **가독성**: 각 컴포넌트의 목적이 명확해짐
- **유지보수성**: 기능별 독립적 수정 가능
- **확장성**: 새 기능 추가 시 해당 컴포넌트만 수정
- **재사용성**: 분할된 컴포넌트 개별 재사용 가능

---

## ⚠️ 주요 도전 과제

### **1. 상태 관리 복잡성**
- **문제**: 11개 useState 훅의 의존성 관계
- **해결**: 상태 흐름 분석 후 Context 또는 Props 전달 방식 선택

### **2. 이벤트 처리 연결**
- **문제**: 컴포넌트 간 이벤트 전파
- **해결**: 명확한 이벤트 인터페이스 정의

### **3. 성능 최적화**
- **문제**: 컴포넌트 분할로 인한 렌더링 증가
- **해결**: React.memo, useMemo, useCallback 적절 활용

---

## 🎯 성공 기준

### **필수 요구사항**
- [ ] 기존 모든 기능이 정상 동작
- [ ] 성능 저하 없음 (±5% 범위 내)
- [ ] TypeScript 컴파일 에러 없음
- [ ] 모든 기존 테스트 통과

### **추가 목표**
- [ ] 코드 가독성 크게 향상
- [ ] 컴포넌트별 독립적 테스트 가능
- [ ] 향후 기능 추가 용이성 확보

---

## 📅 일정 계획

| 단계 | 소요시간 | 시작일 | 완료 예정일 | 주요 작업 |
|------|----------|--------|------------|----------|
| 1단계 | 0.5일 | Day 1 | Day 1 | 분석 및 설계 |
| 2단계 | 0.5일 | Day 1 | Day 2 | 기반 구조 생성 |
| 3단계 | 1일 | Day 2 | Day 3 | 레이아웃/상태바/도구모음 분할 |
| 4단계 | 1일 | Day 3 | Day 4 | 파일탐색기/에디터 분할 |
| 5단계 | 0.5일 | Day 4 | Day 4 | 통합 및 테스트 |

**총 예상 소요시간: 3.5일**

---

## 💡 다음 단계 준비

WikiPage 컴포넌트 분할 완료 후:
1. **1.2 상태 관리 개선**: Context + useReducer 패턴 적용
2. **1.3 TreeComponent 리팩토링**: 455줄 컴포넌트 분할
3. **2.1 커스텀 훅 추출**: 분할된 컴포넌트에서 공통 로직 추출

---

**🚀 준비 완료**: 언제든지 WikiPage 컴포넌트 분할 작업을 시작할 수 있습니다!