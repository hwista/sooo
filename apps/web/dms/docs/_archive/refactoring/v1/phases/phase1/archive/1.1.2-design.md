# ğŸ—ï¸ Phase 1.1.2 ì¤‘ì•™í™”ëœ íƒ€ì… êµ¬ì¡° ì„¤ê³„

**ì„¤ê³„ ì¼ì‹œ**: 2025-01-20  
**ê¸°ì¤€ ë¬¸ì„œ**: 1.1.1-analysis.md  
**ë¸Œëœì¹˜**: refactor/v1  

---

## ğŸ¯ ì„¤ê³„ ëª©í‘œ

1. **ì¤‘ë³µ ì œê±°**: 5ê°œ ì¤‘ë³µ íƒ€ì… â†’ 0ê°œ
2. **ì¼ê´€ì„± í™•ë³´**: í†µì¼ëœ import ê²½ë¡œ
3. **í™•ì¥ì„±**: ë¯¸ë˜ íƒ€ì… ì¶”ê°€ ìš©ì´ì„±
4. **íƒ€ì… ì•ˆì „ì„±**: ê°•í™”ëœ ì œë„¤ë¦­ í™œìš©

---

## ğŸ“ types/ í´ë” êµ¬ì¡° ì„¤ê³„

### **ìµœì¢… êµ¬ì¡°**
```
types/
â”œâ”€â”€ index.ts          # í†µí•© export (ëª¨ë“  íƒ€ì… í•œ ê³³ì—ì„œ import)
â”œâ”€â”€ fileSystem.ts     # íŒŒì¼ ì‹œìŠ¤í…œ ê´€ë ¨ íƒ€ì…
â”œâ”€â”€ api.ts           # API ê´€ë ¨ íƒ€ì…  
â”œâ”€â”€ ui.ts            # UI ì»´í¬ë„ŒíŠ¸ ê´€ë ¨ íƒ€ì…
â””â”€â”€ common.ts        # ê³µí†µ ê¸°ë³¸ íƒ€ì… (í•„ìš”ì‹œ)
```

---

## ğŸ—‚ï¸ íŒŒì¼ë³„ íƒ€ì… ì •ì˜ ì„¤ê³„

### **1. fileSystem.ts** - íŒŒì¼ ì‹œìŠ¤í…œ íƒ€ì…
```typescript
/**
 * íŒŒì¼ ì‹œìŠ¤í…œ ê´€ë ¨ íƒ€ì… ì •ì˜
 * íŒŒì¼/í´ë” êµ¬ì¡°, ë©”íƒ€ì •ë³´, íŒŒì¼ ì‘ì—… ë“±
 */

// ğŸ“„ ê¸°ë³¸ íŒŒì¼ ë…¸ë“œ (ê¸°ì¡´ 3ê³³ ì¤‘ë³µ â†’ 1ê³³ í†µí•©)
export interface FileNode {
  name: string;
  path: string;
  type: 'file' | 'directory';
  children?: FileNode[];
  // í™•ì¥ ì†ì„± (í–¥í›„ ì¶”ê°€ ê°€ëŠ¥)
  size?: number;
  lastModified?: Date;
  permissions?: FilePermissions;
}

// ğŸ“‚ íŒŒì¼ íƒ€ì… í™•ì¥
export type FileType = 'md' | 'txt' | 'json' | 'js' | 'ts' | 'tsx' | 'css' | 'html' | 'xml';

// ğŸ” íŒŒì¼ ê¶Œí•œ (ë¯¸ë˜ í™•ì¥ìš©)
export interface FilePermissions {
  readable: boolean;
  writable: boolean;
  executable: boolean;
}

// ğŸ“Š íŒŒì¼ ë©”íƒ€ì •ë³´
export interface FileMetadata {
  path: string;
  name: string;
  type: FileType;
  size: number;
  lastModified: Date;
  isDirectory: boolean;
}

// ğŸ”„ íŒŒì¼ ì´ë²¤íŠ¸ (ì‹¤ì‹œê°„ ê°ì‹œìš©)
export interface FileEvent {
  type: 'add' | 'change' | 'unlink' | 'addDir' | 'unlinkDir' | 'connected';
  path?: string;
  metadata?: FileMetadata;
  timestamp: number;
}

// ğŸ—‚ï¸ API ì „ìš© íŒŒì¼ ì—”íŠ¸ë¦¬ (ê¸°ì¡´ API ë‚´ë¶€ íƒ€ì… í†µí•©)
export interface FileEntry {
  type: 'file';
  name: string;
  path: string;
  metadata?: FileMetadata;
}

export interface DirectoryEntry {
  type: 'directory';
  name: string;
  path: string;
  children: (FileEntry | DirectoryEntry)[];
}

// ğŸ“ íŒŒì¼ íŠ¸ë¦¬ ê´€ë ¨
export type FileTreeNode = FileEntry | DirectoryEntry;
export type FileTree = FileTreeNode[];
```

### **2. api.ts** - API ê´€ë ¨ íƒ€ì…
```typescript
/**
 * API ê´€ë ¨ íƒ€ì… ì •ì˜
 * ìš”ì²­/ì‘ë‹µ, ì—ëŸ¬ ì²˜ë¦¬, ìƒíƒœ ê´€ë¦¬ ë“±
 */

// ğŸŒ ê¸°ë³¸ API ì‘ë‹µ (ê¸°ì¡´ ìœ ì§€, í™•ì¥)
export interface ApiResponse<T = unknown> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
  // í™•ì¥ ì†ì„±
  timestamp?: number;
  requestId?: string;
  pagination?: PaginationInfo;
}

// ğŸ“„ í˜ì´ì§€ë„¤ì´ì…˜ ì •ë³´
export interface PaginationInfo {
  page: number;
  limit: number;
  total: number;
  hasNext: boolean;
  hasPrev: boolean;
}

// ğŸ”§ API ìš”ì²­ ì˜µì…˜ (ê¸°ì¡´ í™•ì¥)
export interface ApiRequestOptions {
  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';
  headers?: Record<string, string>;
  body?: unknown;
  timeout?: number;
  retries?: number;
  cache?: boolean;
}

// ğŸ“ íŒŒì¼ API ì•¡ì…˜ (ê¸°ì¡´ í™•ì¥)
export type FileAction = 
  | 'create' 
  | 'read' 
  | 'update' 
  | 'delete' 
  | 'rename' 
  | 'createFolder'
  | 'deleteFolder'
  | 'copy'
  | 'move'
  | 'search';

// ğŸ“ íŒŒì¼ API ìš”ì²­ (ê¸°ì¡´ í™•ì¥)
export interface FileApiRequest {
  action: FileAction;
  path?: string;
  content?: string;
  name?: string;
  parent?: string;
  oldPath?: string;
  newPath?: string;
  // ìƒˆë¡œìš´ í™•ì¥ ì†ì„±
  recursive?: boolean;
  force?: boolean;
  backup?: boolean;
}

// ğŸ” ê²€ìƒ‰ ê´€ë ¨ API
export interface SearchApiRequest {
  query: string;
  path?: string;
  fileTypes?: FileType[];
  caseSensitive?: boolean;
  includeContent?: boolean;
  maxResults?: number;
}

export interface SearchResult {
  path: string;
  name: string;
  type: FileType;
  matches: SearchMatch[];
}

export interface SearchMatch {
  line: number;
  column: number;
  text: string;
  context: string;
}

// ğŸ“Š API ìƒíƒœ ê´€ë¦¬
export interface ApiState<T = unknown> {
  data: T | null;
  loading: boolean;
  error: string | null;
  lastUpdated: Date | null;
}

// ğŸ”„ API ìºì‹œ
export interface ApiCache<T = unknown> {
  key: string;
  data: T;
  timestamp: number;
  ttl: number;
}
```

### **3. ui.ts** - UI ì»´í¬ë„ŒíŠ¸ íƒ€ì…
```typescript
/**
 * UI ì»´í¬ë„ŒíŠ¸ ê´€ë ¨ íƒ€ì… ì •ì˜
 * ì•Œë¦¼, ëª¨ë‹¬, ìƒíƒœ ê´€ë¦¬ ë“±
 */

// ğŸ”” ì•Œë¦¼ ì‹œìŠ¤í…œ (ê¸°ì¡´ 2ê³³ ì¤‘ë³µ â†’ 1ê³³ í†µí•©)
export interface NotificationData {
  id: string;
  type: 'success' | 'error' | 'info' | 'warning';
  title: string;
  message?: string;
  duration?: number;
  // í™•ì¥ ì†ì„±
  action?: NotificationAction;
  persistent?: boolean;
  icon?: string;
}

export interface NotificationAction {
  label: string;
  handler: () => void;
  style?: 'primary' | 'secondary' | 'danger';
}

// ğŸ–±ï¸ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ê¸°ì¡´ í™•ì¥)
export interface ContextMenuState {
  visible: boolean;
  x: number;
  y: number;
  target: FileNode | null;
  type: 'file' | 'folder' | 'empty';
  id: string;
  isRendering?: boolean;
  // í™•ì¥ ì†ì„±
  items?: ContextMenuItem[];
}

export interface ContextMenuItem {
  id: string;
  label: string;
  icon?: string;
  shortcut?: string;
  disabled?: boolean;
  separator?: boolean;
  submenu?: ContextMenuItem[];
  handler?: (target: FileNode | null) => void;
}

// ğŸ—‚ï¸ íŒŒì¼ ìƒì„± ë‹¤ì´ì–¼ë¡œê·¸ (ê¸°ì¡´ í™•ì¥)
export interface CreateDialogState {
  type: 'file' | 'folder';
  parentPath?: string;
  // í™•ì¥ ì†ì„±
  visible: boolean;
  defaultName?: string;
  allowedTypes?: FileType[];
  validation?: ValidationRules;
}

export interface CreateFileParams {
  name: string;
  extension: string;
  path: string;
  type: 'file' | 'folder';
  // í™•ì¥ ì†ì„±
  template?: string;
  metadata?: Partial<FileMetadata>;
}

// âœ… ìœ íš¨ì„± ê²€ì‚¬
export interface ValidationRules {
  required?: boolean;
  minLength?: number;
  maxLength?: number;
  pattern?: RegExp;
  custom?: (value: string) => string | null;
}

export interface ValidationResult {
  valid: boolean;
  errors: string[];
}

// ğŸ’¬ ë©”ì‹œì§€ ëª¨ë‹¬
export interface MessageConfig {
  title: string;
  message: string;
  type?: 'info' | 'warning' | 'error' | 'success';
  confirmText?: string;
  cancelText?: string;
  onConfirm?: () => void;
  onCancel?: () => void;
}

export interface MessageState extends MessageConfig {
  visible: boolean;
  id: string;
}

// ğŸ¨ í…Œë§ˆ ê´€ë ¨
export interface ThemeConfig {
  mode: 'light' | 'dark' | 'system';
  primaryColor: string;
  accentColor: string;
  fontSize: 'small' | 'medium' | 'large';
  fontFamily: string;
}

// ğŸ“ ë ˆì´ì•„ì›ƒ ê´€ë ¨
export interface LayoutState {
  sidebarWidth: number;
  sidebarCollapsed: boolean;
  editorSplit: 'single' | 'horizontal' | 'vertical';
  previewMode: 'hidden' | 'side' | 'overlay';
}

// ğŸ”§ ì»´í¬ë„ŒíŠ¸ ê³µí†µ Props
export interface BaseComponentProps {
  className?: string;
  id?: string;
  'data-testid'?: string;
  style?: React.CSSProperties;
}

// ğŸ›ï¸ ì»¨íŠ¸ë¡¤ ì»´í¬ë„ŒíŠ¸ Props
export interface ControlProps extends BaseComponentProps {
  disabled?: boolean;
  loading?: boolean;
  size?: 'small' | 'medium' | 'large';
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
}
```

### **4. common.ts** - ê³µí†µ ê¸°ë³¸ íƒ€ì… (í•„ìš”ì‹œ)
```typescript
/**
 * ê³µí†µ ê¸°ë³¸ íƒ€ì… ì •ì˜
 * ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ íƒ€ì…ë“¤
 */

// ğŸ”§ ìœ í‹¸ë¦¬í‹° íƒ€ì…ë“¤
export type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;
export type RequiredFields<T, K extends keyof T> = T & Required<Pick<T, K>>;
export type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];
};

// ğŸ“… ì‹œê°„ ê´€ë ¨
export type Timestamp = number;
export type ISODateString = string;

// ğŸ”¤ ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…ë“¤
export type SortOrder = 'asc' | 'desc';
export type LoadingState = 'idle' | 'loading' | 'success' | 'error';
export type ActionStatus = 'pending' | 'completed' | 'failed' | 'cancelled';

// ğŸ¯ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ íƒ€ì…ë“¤
export type EventHandler<T = void> = (event: T) => void;
export type AsyncEventHandler<T = void> = (event: T) => Promise<void>;
export type CancellableEventHandler<T = void> = (event: T) => boolean | void;

// ğŸ” ê²€ìƒ‰/í•„í„° ê´€ë ¨
export interface FilterOptions<T = unknown> {
  query?: string;
  field?: keyof T;
  operator?: 'equals' | 'contains' | 'startsWith' | 'endsWith' | 'regex';
  caseSensitive?: boolean;
}

export interface SortOptions<T = unknown> {
  field: keyof T;
  order: SortOrder;
}

// ğŸ“Š ìƒíƒœ ê´€ë¦¬ ê´€ë ¨
export interface AsyncState<T = unknown, E = Error> {
  data: T | null;
  loading: boolean;
  error: E | null;
  lastUpdated: Date | null;
}

// ğŸ”’ ê¶Œí•œ ê´€ë ¨
export type Permission = 'read' | 'write' | 'delete' | 'admin';
export type Role = 'viewer' | 'editor' | 'admin';

export interface UserPermissions {
  role: Role;
  permissions: Permission[];
  restrictions?: string[];
}
```

### **5. index.ts** - í†µí•© Export
```typescript
/**
 * íƒ€ì… í†µí•© Export
 * ëª¨ë“  íƒ€ì…ì„ í•œ ê³³ì—ì„œ import ê°€ëŠ¥
 */

// íŒŒì¼ ì‹œìŠ¤í…œ íƒ€ì…
export type {
  FileNode,
  FileType,
  FilePermissions,
  FileMetadata,
  FileEvent,
  FileEntry,
  DirectoryEntry,
  FileTreeNode,
  FileTree
} from './fileSystem';

// API ê´€ë ¨ íƒ€ì…
export type {
  ApiResponse,
  PaginationInfo,
  ApiRequestOptions,
  FileAction,
  FileApiRequest,
  SearchApiRequest,
  SearchResult,
  SearchMatch,
  ApiState,
  ApiCache
} from './api';

// UI ì»´í¬ë„ŒíŠ¸ íƒ€ì…
export type {
  NotificationData,
  NotificationAction,
  ContextMenuState,
  ContextMenuItem,
  CreateDialogState,
  CreateFileParams,
  ValidationRules,
  ValidationResult,
  MessageConfig,
  MessageState,
  ThemeConfig,
  LayoutState,
  BaseComponentProps,
  ControlProps
} from './ui';

// ê³µí†µ ê¸°ë³¸ íƒ€ì…
export type {
  Optional,
  RequiredFields,
  DeepPartial,
  Timestamp,
  ISODateString,
  SortOrder,
  LoadingState,
  ActionStatus,
  EventHandler,
  AsyncEventHandler,
  CancellableEventHandler,
  FilterOptions,
  SortOptions,
  AsyncState,
  Permission,
  Role,
  UserPermissions
} from './common';

// ê¸°ì¡´ errorUtils íƒ€ì…ë“¤ë„ re-export (ì¼ê´€ì„±ì„ ìœ„í•´)
export type { LogLevel, ErrorContext } from '../utils/errorUtils';
```

---

## ğŸ¯ ì„¤ê³„ ì›ì¹™

### **1. ë‹¨ì¼ ì±…ì„ ì›ì¹™**
- ê° íŒŒì¼ì€ íŠ¹ì • ë„ë©”ì¸ì˜ íƒ€ì…ë§Œ ë‹´ë‹¹
- fileSystem.ts: íŒŒì¼/í´ë” ê´€ë ¨
- api.ts: ë„¤íŠ¸ì›Œí¬/ë°ì´í„° ê´€ë ¨
- ui.ts: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ê´€ë ¨

### **2. í™•ì¥ì„± ê³ ë ¤**
- ê¸°ì¡´ íƒ€ì…ì— optional ì†ì„± ì¶”ê°€ ê°€ëŠ¥
- ìƒˆë¡œìš´ íƒ€ì… ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥
- ì œë„¤ë¦­ í™œìš©ìœ¼ë¡œ ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”

### **3. íƒ€ì… ì•ˆì „ì„± ê°•í™”**
- Union íƒ€ì… í™œìš©ìœ¼ë¡œ ëª…í™•í•œ êµ¬ë¶„
- Required/Optional ëª…ì‹œì  êµ¬ë¶„
- ì œë„¤ë¦­ ì œì•½ ì¡°ê±´ í™œìš©

### **4. ì¼ê´€ì„± í™•ë³´**
- ë„¤ì´ë° ì»¨ë²¤ì…˜ í†µì¼ (PascalCase)
- ê³µí†µ ì†ì„± íŒ¨í„´ (id, name, type ë“±)
- í™•ì¥ ì†ì„± íŒ¨í„´ í†µì¼

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš

### **Phase 1: ê¸°ë³¸ êµ¬ì¡° ìƒì„±**
1. types/ í´ë” ìƒì„±
2. 4ê°œ íŒŒì¼ ê¸°ë³¸ êµ¬ì¡° ìƒì„±
3. index.ts ì„¤ì •

### **Phase 2: í•µì‹¬ íƒ€ì… ì´ë™**
1. FileNode í†µí•© (3ê³³ â†’ 1ê³³)
2. NotificationData í†µí•© (2ê³³ â†’ 1ê³³)

### **Phase 3: API íƒ€ì… ì •ë¦¬**
1. ê¸°ì¡´ apiClient.ts íƒ€ì… ì´ë™
2. API ë‚´ë¶€ íƒ€ì…ë“¤ í†µí•©

### **Phase 4: ì „ì²´ import ê²½ë¡œ ì—…ë°ì´íŠ¸**
1. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ import ìˆ˜ì •
2. ë¹Œë“œ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

---

## âœ… ì„±ê³µ ì§€í‘œ

### **ì„¤ê³„ ì™„ì„±ë„**
- [ ] 5ê°œ ì¤‘ë³µ íƒ€ì… â†’ í†µí•© ì„¤ê³„ ì™„ë£Œ
- [ ] 4ê°œ ì¹´í…Œê³ ë¦¬ ëª…í™•íˆ ë¶„ë¦¬
- [ ] í™•ì¥ì„± ê³ ë ¤í•œ êµ¬ì¡° ì„¤ê³„

### **ì¼ê´€ì„± í™•ë³´**
- [ ] ë„¤ì´ë° ì»¨ë²¤ì…˜ í†µì¼
- [ ] import ê²½ë¡œ íŒ¨í„´ í†µì¼
- [ ] íƒ€ì… ê³„ì¸µ êµ¬ì¡° ëª…í™•í™”

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

**Phase 1.1.3 types/ í´ë” êµ¬ì¡° ìƒì„±**ìœ¼ë¡œ ì§„í–‰í•˜ì—¬ ì„¤ê³„ëœ êµ¬ì¡°ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.