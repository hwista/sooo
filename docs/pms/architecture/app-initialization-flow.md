# PMS ì•± ì´ˆê¸°í™” íë¦„

> **ì‘ì„±ì¼**: 2026-01-29  
> **ëª©ì **: PMS ì•±ì˜ ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¶€í„° ë Œë”ë§ê¹Œì§€ì˜ ì „ì²´ íë¦„ ì •ë¦¬

---

## ğŸ“Š ì´ˆê¸°í™” íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Root Layout (app/layout.tsx)                                              â”‚
â”‚    â”œâ”€ ë©”íƒ€ë°ì´í„° ì„¤ì • (title, description)                                    â”‚
â”‚    â””â”€ <Providers>                                                            â”‚
â”‚         â””â”€ QueryClientProvider (React Query)                                 â”‚
â”‚              â””â”€ {children}                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Main Layout (app/(main)/layout.tsx)                                       â”‚
â”‚    â”œâ”€ useEffect #1: checkAuth() â†’ í† í° ê²€ì¦                                   â”‚
â”‚    â”‚     â””â”€ accessToken ìœ íš¨ì„± â†’ isAuthenticated, user ì„¤ì •                   â”‚
â”‚    â”œâ”€ ì¡°ê±´ë¶€ ë Œë”ë§:                                                          â”‚
â”‚    â”‚     â”œâ”€ (isChecking || authLoading) â†’ ë¡œë”© ìŠ¤í”¼ë„ˆ                         â”‚
â”‚    â”‚     â”œâ”€ (!isAuthenticated) â†’ ë¡œê·¸ì¸ í¼ í‘œì‹œ                               â”‚
â”‚    â”‚     â””â”€ (isAuthenticated) â†’ AppLayout ë Œë”ë§                              â”‚
â”‚    â”œâ”€ useEffect #2: ì¸ì¦ í›„ refreshMenu() â†’ ë©”ë‰´ API í˜¸ì¶œ                     â”‚
â”‚    â””â”€ return <AppLayout>{children}</AppLayout>                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. AppLayout (components/layout/AppLayout.tsx)                               â”‚
â”‚    â”œâ”€ useLayoutStore: sidebarWidth, isMobileMenuOpen                         â”‚
â”‚    â”œâ”€ ë ˆì´ì•„ì›ƒ êµ¬ì¡°:                                                          â”‚
â”‚    â”‚     â”œâ”€ Sidebar (ê³ ì • ë„ˆë¹„ ë˜ëŠ” ë¦¬ì‚¬ì´ì¦ˆ ê°€ëŠ¥)                              â”‚
â”‚    â”‚     â”œâ”€ Main Area (flex-1)                                               â”‚
â”‚    â”‚     â”‚     â”œâ”€ Header                                                     â”‚
â”‚    â”‚     â”‚     â”œâ”€ TabBar                                                     â”‚
â”‚    â”‚     â”‚     â””â”€ ContentArea                                                â”‚
â”‚    â”‚     â””â”€ SidebarResizer (ë“œë˜ê·¸ë¡œ ë„ˆë¹„ ì¡°ì ˆ)                                â”‚
â”‚    â””â”€ ëª¨ë°”ì¼: MobileMenuOverlay                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. Sidebar (components/layout/sidebar/Sidebar.tsx)                           â”‚
â”‚    â”œâ”€ í—¤ë”: ë¡œê³  + ì ‘ê¸° ë²„íŠ¼                                                   â”‚
â”‚    â”œâ”€ ë¹ ë¥¸ ì•¡ì„¸ìŠ¤ (Favorites)                                                 â”‚
â”‚    â”œâ”€ SidebarMenuTree: ë©”ë‰´ íŠ¸ë¦¬ ë Œë”ë§                                       â”‚
â”‚    â”‚     â””â”€ useMenuStore.generalMenus/adminMenus                             â”‚
â”‚    â””â”€ ì‚¬ìš©ì ì •ë³´ + ë¡œê·¸ì•„ì›ƒ                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. ContentArea (components/layout/ContentArea.tsx)                           â”‚
â”‚    â”œâ”€ pageComponents ë§¤í•‘ (React.lazy ë™ì  import)                            â”‚
â”‚    â”‚     â”œâ”€ '/home': HomeDashboardPage                                       â”‚
â”‚    â”‚     â”œâ”€ '/request': RequestListPage                                      â”‚
â”‚    â”‚     â”œâ”€ '/request/create': RequestCreatePage                             â”‚
â”‚    â”‚     â”œâ”€ '/proposal': ProposalListPage                                    â”‚
â”‚    â”‚     â”œâ”€ '/execution': ExecutionListPage                                  â”‚
â”‚    â”‚     â””â”€ '/transition': TransitionListPage                                â”‚
â”‚    â”œâ”€ activeTab.pathë¡œ ì»´í¬ë„ŒíŠ¸ ê²°ì •                                          â”‚
â”‚    â””â”€ <Suspense><PageComponent /></Suspense>                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. ë©”ë‰´ í´ë¦­ ì‹œ (SidebarMenuTree â†’ handleMenuClick)                           â”‚
â”‚    â””â”€ openTab({ path: '/request', title: 'ì˜ë¢°', ... })                       â”‚
â”‚         â””â”€ ContentArea ë¦¬ë Œë”ë§ â†’ RequestListPage ë¡œë”©                        â”‚
â”‚              â””â”€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ìì²´ì ìœ¼ë¡œ ë°ì´í„° fetch                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ í•µì‹¬ íŒŒì¼ êµ¬ì¡°

```
apps/web/pms/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # Root Layout (Providers)
â”‚   â”œâ”€â”€ providers.tsx           # QueryClientProvider ì„¤ì •
â”‚   â”œâ”€â”€ (main)/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # Auth ì²´í¬ + AppLayout ë Œë”ë§
â”‚   â”‚   â”œâ”€â”€ page.tsx            # Home í˜ì´ì§€ (/ ë¼ìš°íŠ¸)
â”‚   â”‚   â”œâ”€â”€ request/page.tsx    # ì–‡ì€ ë˜í¼
â”‚   â”‚   â”œâ”€â”€ proposal/page.tsx
â”‚   â”‚   â”œâ”€â”€ execution/page.tsx
â”‚   â”‚   â””â”€â”€ transition/page.tsx
â”‚   â””â”€â”€ not-found.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx       # ë©”ì¸ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ TabBar.tsx
â”‚   â”‚   â”œâ”€â”€ ContentArea.tsx     # ë™ì  í˜ì´ì§€ ë¡œë”©
â”‚   â”‚   â””â”€â”€ sidebar/
â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚       â””â”€â”€ SidebarMenuTree.tsx
â”‚   â””â”€â”€ pages/                  # ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ í˜ì´ì§€
â”‚       â”œâ”€â”€ home/
â”‚       â”‚   â””â”€â”€ HomeDashboardPage.tsx
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ RequestListPage.tsx
â”‚       â”‚   â””â”€â”€ RequestCreatePage.tsx
â”‚       â”œâ”€â”€ proposal/
â”‚       â”‚   â””â”€â”€ ProposalListPage.tsx
â”‚       â”œâ”€â”€ execution/
â”‚       â”‚   â””â”€â”€ ExecutionListPage.tsx
â”‚       â””â”€â”€ transition/
â”‚           â””â”€â”€ TransitionListPage.tsx
â””â”€â”€ stores/
    â”œâ”€â”€ auth.store.ts           # ì¸ì¦ ìƒíƒœ
    â”œâ”€â”€ menu.store.ts           # ë©”ë‰´ íŠ¸ë¦¬, ì¦ê²¨ì°¾ê¸°
    â”œâ”€â”€ tab.store.ts            # íƒ­ ìƒíƒœ
    â”œâ”€â”€ sidebar.store.ts        # ì‚¬ì´ë“œë°” UI
    â””â”€â”€ layout.store.ts         # ë ˆì´ì•„ì›ƒ ìƒíƒœ
```

---

## ğŸ”„ Store ê°„ ì—°ë™ íë¦„

### 1. ì¸ì¦ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    checkAuth()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AuthStore   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ Main Layout  â”‚
â”‚              â”‚                   â”‚              â”‚
â”‚ accessToken  â”‚                   â”‚ isChecking   â”‚
â”‚ user         â”‚                   â”‚              â”‚
â”‚ isAuth       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ ì¡°ê±´ë¶€ ë Œë”  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ authenticated
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MenuStore   â”‚ â—„â”€â”€ refreshMenu() API í˜¸ì¶œ
â”‚              â”‚
â”‚ generalMenus â”‚
â”‚ adminMenus   â”‚
â”‚ favorites    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ë„¤ë¹„ê²Œì´ì…˜ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   openTab()   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SidebarMenuTree â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   TabStore   â”‚
â”‚                 â”‚               â”‚              â”‚
â”‚ handleMenuClick â”‚               â”‚ tabs[]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ activeTabId  â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ ContentArea  â”‚
                                  â”‚              â”‚
                                  â”‚ pageComp[path]â”‚
                                  â”‚ <PageComp /> â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ë ˆì´ì•„ì›ƒ ìƒíƒœ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LayoutStore  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ SidebarResizer  â”‚
â”‚              â”‚  setSidebarWidth â”‚                 â”‚
â”‚ sidebarWidth â”‚                  â”‚ onDrag          â”‚
â”‚ deviceType   â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚              â”‚
â”‚              â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ AppLayout       â”‚
â”‚              â”‚  initDevice      â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ useEffect       â”‚
       â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Sidebar    â”‚  â”‚ ContentArea  â”‚
â”‚ width={...}  â”‚  â”‚ flex-1       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ì»´í¬ë„ŒíŠ¸ë³„ ì£¼ìš” ì—­í• 

### Root Layout (`app/layout.tsx`)
- HTML ë¬¸ì„œ ê¸°ë³¸ êµ¬ì¡°
- Providers ë˜í•‘ (React Query)
- ì „ì—­ ë©”íƒ€ë°ì´í„°

### Main Layout (`app/(main)/layout.tsx`)
- **ì¸ì¦ ê²Œì´íŠ¸**: ë¹„ì¸ì¦ ì‹œ ë¡œê·¸ì¸ í¼
- **ë©”ë‰´ ì´ˆê¸°í™”**: ì¸ì¦ ì„±ê³µ í›„ ë©”ë‰´ ë¡œë“œ
- AppLayoutìœ¼ë¡œ ìì‹ ë Œë”ë§

### AppLayout (`components/layout/AppLayout.tsx`)
- ì „ì²´ ë ˆì´ì•„ì›ƒ êµ¬ì„± (Sidebar + Main)
- ë°˜ì‘í˜• ì²˜ë¦¬ (ëª¨ë°”ì¼ ë©”ë‰´)
- ì‚¬ì´ë“œë°” ë¦¬ì‚¬ì´ì¦ˆ ë¡œì§

### ContentArea (`components/layout/ContentArea.tsx`)
- **í•µì‹¬**: `pageComponents` ê°ì²´ë¡œ ë™ì  í˜ì´ì§€ ë¡œë”©
- `activeTab.path`ì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ ê²°ì •
- Suspenseë¡œ ë¡œë”© ìƒíƒœ ì²˜ë¦¬

### SidebarMenuTree (`components/layout/sidebar/SidebarMenuTree.tsx`)
- ë©”ë‰´ íŠ¸ë¦¬ ë Œë”ë§
- í´ë¦­ ì‹œ `openTab()` í˜¸ì¶œ
- **ë°ì´í„° ë¡œë”© ì±…ì„ ì—†ìŒ** (í˜ì´ì§€ê°€ ìì²´ ë¡œë“œ)

---

## âš¡ í•µì‹¬ íŒ¨í„´: pageComponents ë™ì  ë¡œë”©

```typescript
// ContentArea.tsx
const pageComponents: Record<string, React.LazyExoticComponent<React.ComponentType>> = {
  '/home': lazy(() => import('@/components/pages/home/HomeDashboardPage')),
  '/request': lazy(() => import('@/components/pages/request/RequestListPage')),
  '/request/create': lazy(() => import('@/components/pages/request/RequestCreatePage')),
  '/proposal': lazy(() => import('@/components/pages/proposal/ProposalListPage')),
  '/execution': lazy(() => import('@/components/pages/execution/ExecutionListPage')),
  '/transition': lazy(() => import('@/components/pages/transition/TransitionListPage')),
};

// ë Œë”ë§
const PageComponent = pageComponents[activeTab.path];
return (
  <Suspense fallback={<Loading />}>
    <PageComponent />
  </Suspense>
);
```

### ì¥ì 
1. **ì½”ë“œ ë¶„í• **: ê° í˜ì´ì§€ëŠ” í•„ìš”í•  ë•Œë§Œ ë¡œë“œ
2. **ì±…ì„ ë¶„ë¦¬**: ë©”ë‰´ëŠ” íƒ­ë§Œ ì—´ê³ , í˜ì´ì§€ê°€ ë°ì´í„° ë¡œë“œ
3. **URL ë³´ì•ˆ**: Next.js ë¼ìš°íŠ¸ êµ¬ì¡° ìµœì†Œ ë…¸ì¶œ
4. **ì¼ê´€ì„±**: ëª¨ë“  í˜ì´ì§€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë¡œë”©

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [í˜ì´ì§€ ë³´ì•ˆ ë° ë¼ìš°íŒ… ì „ëµ](./page-routing.md)
- [ìƒíƒœ ê´€ë¦¬](./state-management.md)
- [ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ](./layout-system.md)
