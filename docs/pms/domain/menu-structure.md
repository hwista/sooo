# SSOO ë©”ë‰´ êµ¬ì¡°

> ìµœì¢… ì—…ë°ì´íŠ¸: 2026-01-22

---

## í”„ë¡œì íŠ¸ ìƒíƒœ 4ë‹¨ê³„ êµ¬ì¡°

> ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ íë¦„: **ìš”ì²­ â†’ ì œì•ˆ â†’ ì‹¤í–‰ â†’ ì „í™˜**

| ë‹¨ê³„ | ì˜ë¬¸ | status_code | ì„¤ëª… |
|------|------|-------------|------|
| ìš”ì²­ | Request | `request` | ê³ ê° ìš”ì²­ ì ‘ìˆ˜, AM ê´€ë¦¬ |
| ì œì•ˆ | Proposal | `proposal` | ì œì•ˆ/ê²¬ì /í˜‘ìƒ |
| ì‹¤í–‰ | Execution | `execution` | ê³„ì•½ í›„ í”„ë¡œì íŠ¸ ì‹¤í–‰, PM ì¤‘ì‹¬ |
| ì „í™˜ | Transition | `transition` | í”„ë¡œì íŠ¸ ì™„ë£Œ, SIâ†’SM ì „í™˜, ì´ê´€ |

**stage_code (ê° ìƒíƒœ ê³µí†µ):**
- `waiting` - ëŒ€ê¸°
- `in_progress` - ì§„í–‰ì¤‘
- `done` - ì™„ë£Œ

---

## 1ë ˆë²¨ ë©”ë‰´ êµ¬ì¡°

| ë©”ë‰´ | ì˜ë¬¸ | ì•„ì´ì½˜ | ì»¤ë²„ ì—…ë¬´ | ë¹„ê³  |
|------|------|--------|----------|------|
| ëŒ€ì‹œë³´ë“œ | Dashboard | LayoutDashboard | ì „ì²´ í˜„í™©, KPI, ì•Œë¦¼ | ë©”ì¸ ì§„ì…ì  |
| ìš”ì²­ | Request | MessageSquare | ê³ ê° ìš”ì²­ ì ‘ìˆ˜/ê´€ë¦¬, AM ê´€ë¦¬ | AM í†µí•œ ê³ ê°ì‚¬ ìš”ì²­ |
| ì œì•ˆ | Proposal | Lightbulb | ì œì•ˆì„œ, ê²¬ì , í˜‘ìƒ | Sales ì¤‘ì‹¬ |
| ì‹¤í–‰ | Execution | Rocket | í”„ë¡œì íŠ¸ ëª©ë¡/ìƒì„¸, ì§„í–‰ê´€ë¦¬, ì‚°ì¶œë¬¼, WBS, ì´ìŠˆ, ë¦¬ìŠ¤í¬ | PM ì¤‘ì‹¬, í•µì‹¬ ì—…ë¬´ |
| ì „í™˜ | Transition | ArrowRightLeft | ì¢…ë£Œì¡°ê±´ ê²€ì¦, ì´ê´€ ì¤€ë¹„, ìš´ì˜ ì „í™˜ | SI â†’ SM ì „í™˜ |

---

## ê´€ë¦¬ì ë©”ë‰´ êµ¬ì¡° (1ë ˆë²¨ í‰íƒ„í™”)

> `is_admin_menu = true` ì„¤ì •, `is_admin = true` ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

| ë©”ë‰´ | ì˜ë¬¸ | ì•„ì´ì½˜ | ë¹„ê³  |
|------|------|--------|------|
| ì‚¬ìš©ì ê´€ë¦¬ | Users | User | ê³„ì • ê´€ë¦¬ |
| ì—­í•  ê´€ë¦¬ | Roles | Shield | ê¶Œí•œ ì²´ê³„ |
| ë©”ë‰´ ê´€ë¦¬ | Menus | Menu | ë©”ë‰´ êµ¬ì„± |
| ì½”ë“œ ê´€ë¦¬ | Codes | Code | ê³µí†µ ì½”ë“œ |
| ê³ ê°ì‚¬ ê´€ë¦¬ | Customers | Building | ê¸°ì¤€ ì •ë³´ |
| ë¶€ì„œ ê´€ë¦¬ | Departments | Briefcase | ì¡°ì§ ê´€ë¦¬ |

---

## ì‚¬ì´ë“œë°” UI êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â­ ì¦ê²¨ì°¾ê¸°                 â”‚  â† Section 1
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ í˜„ì¬ ì—´ë¦° í˜ì´ì§€         â”‚  â† Section 2
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ì „ì²´ë©”ë‰´                 â”‚  â† Section 3 (is_admin_menu = false)
â”‚    â”œâ”€â”€ ëŒ€ì‹œë³´ë“œ              â”‚
â”‚    â”œâ”€â”€ ìš”ì²­                  â”‚
â”‚    â”œâ”€â”€ ì œì•ˆ                  â”‚
â”‚    â”œâ”€â”€ ì‹¤í–‰                  â”‚
â”‚    â””â”€â”€ ì „í™˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”’ ê´€ë¦¬ì                   â”‚  â† Section 4 (is_admin_menu = true)
â”‚    â”œâ”€â”€ ì‚¬ìš©ì ê´€ë¦¬           â”‚     (is_admin=true ì‚¬ìš©ìë§Œ í‘œì‹œ)
â”‚    â”œâ”€â”€ ì—­í•  ê´€ë¦¬             â”‚
â”‚    â”œâ”€â”€ ë©”ë‰´ ê´€ë¦¬             â”‚
â”‚    â”œâ”€â”€ ì½”ë“œ ê´€ë¦¬             â”‚
â”‚    â”œâ”€â”€ ê³ ê°ì‚¬ ê´€ë¦¬           â”‚
â”‚    â””â”€â”€ ë¶€ì„œ ê´€ë¦¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API ì‘ë‹µ êµ¬ì¡°:** `GET /api/menus/my`
```typescript
{
  generalMenus: MenuItem[],  // is_admin_menu = false
  adminMenus: MenuItem[],    // is_admin_menu = true (ê´€ë¦¬ìë§Œ)
  favorites: FavoriteMenu[]  // ì¦ê²¨ì°¾ê¸°
}
```

---

## ìš”ì²­(Request) ë©”ë‰´ ìƒì„¸ êµ¬ì¡°

```
ìš”ì²­ (request)
â”œâ”€â”€ ìš”ì²­ ëª©ë¡ (request/list)    â† /request ê²½ë¡œ
â””â”€â”€ ìš”ì²­ ë“±ë¡ (request/create)  â† /request/create ê²½ë¡œ
```

### ìš”ì²­ ë“±ë¡ ì‹œ pr_project_m ìƒíƒœ

| ì»¬ëŸ¼ | ê°’ | ì„¤ëª… |
|------|-----|------|
| `status_code` | `request` | ìš”ì²­ ë‹¨ê³„ |
| `stage_code` | `waiting` | ëŒ€ê¸° ìƒíƒœ (ê²€í†  ì „) |
| `done_result_code` | NULL | ì•„ì§ ì™„ë£Œ ì „ |

### íë¦„ ìš”ì•½

1. **ìš”ì²­ ë“±ë¡** â†’ request + waiting
2. **ê²€í†  ì‹œì‘** â†’ request + in_progress
3. **ì œì•ˆ ë‹¨ê³„ ì „í™˜** â†’ proposal + waiting
4. **ê³„ì•½/ìˆ˜ì£¼ í™•ì •** â†’ execution + waiting
5. **í”„ë¡œì íŠ¸ ì™„ë£Œ** â†’ transition + waiting â†’ done

---

## ê¶Œí•œ-ë©”ë‰´ ë§¤íŠ¸ë¦­ìŠ¤ (1ë ˆë²¨ ê¸°ì¤€)

| ë©”ë‰´ | admin | manager | user | viewer |
|------|-------|---------|------|--------|
| ëŒ€ì‹œë³´ë“œ | âœ… | âœ… | âœ… | âœ… |
| ìš”ì²­ | âœ… | âœ… | ğŸ‘ï¸ | ğŸ‘ï¸ |
| ì œì•ˆ | âœ… | âœ… | âœ… | ğŸ‘ï¸ | âŒ | âŒ |
| ì‹¤í–‰ | âœ… | ğŸ‘ï¸ | âœ… | âœ… | ğŸ‘ï¸ | âœ… |
| ì „í™˜ | âœ… | âŒ | âœ… | âœ… | âœ… | âŒ |
| ê´€ë¦¬ì | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |

> âœ… ì „ì²´ ì ‘ê·¼, ğŸ‘ï¸ ì½ê¸° ì „ìš©, âŒ ìˆ¨ê¹€

---

## ê¶Œí•œ ê´€ë¦¬ í…Œì´ë¸”

| í…Œì´ë¸” | ìš©ë„ | í˜„ì¬ ìƒíƒœ |
|--------|------|----------|
| `cm_menu_m` | ë©”ë‰´ ë§ˆìŠ¤í„° | âœ… í™œì„± |
| `cm_role_menu_r` | ì—­í• ë³„ ë©”ë‰´ ê¶Œí•œ | ğŸ”² Role ì •ì˜ í›„ í™œì„±í™” |
| `cm_user_menu_r` | ì‚¬ìš©ìë³„ ë©”ë‰´ ê¶Œí•œ | âœ… í˜„ì¬ ì‚¬ìš© ì¤‘ |
| `cm_user_favorite_r` | ì¦ê²¨ì°¾ê¸° | âœ… í™œì„± |
| `cm_dept_menu_r` | ë¶€ì„œë³„ ë©”ë‰´ ê¶Œí•œ | ğŸ”² í™•ì¥ ì„¤ê³„ë§Œ ì™„ë£Œ |

---

## ê¶Œí•œ ê³„ì‚° ë¡œì§

### í˜„ì¬ (Role ë¯¸ì •ì˜)

```
í˜„ì¬ ê¶Œí•œ = ì‚¬ìš©ì ì§ì ‘ ê¶Œí•œ (cm_user_menu_r WHERE override_type = 'grant')
```

### ì¶”í›„ (Role ì •ì˜ í›„, UNION ë°©ì‹)

```
ìµœì¢… ê¶Œí•œ = ì—­í•  ê¶Œí•œ (cm_role_menu_r)
           âˆª ì‚¬ìš©ì ê°œë³„ ê¶Œí•œ (cm_user_menu_r WHERE override_type = 'grant')
           - ì‚¬ìš©ì ê¶Œí•œ ë°•íƒˆ (cm_user_menu_r WHERE override_type = 'revoke')
```

---

## ê´€ë ¨ ë¬¸ì„œ

- [../../common/reference/db/schema.dbml](../../common/reference/db/schema.dbml) - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (cm_menu, cm_role_menu, cm_user_menu)
- [database-guide.md](../../common/guides/database-guide.md) - ë°ì´í„°ë² ì´ìŠ¤ ê°€ì´ë“œ (ê³µìš©)
- [../architecture/tech-decisions.md](../architecture/tech-decisions.md) - ê¶Œí•œ ê´€ë¦¬ ë°©ì‹ ê²°ì •
