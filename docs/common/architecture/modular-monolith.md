# ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜

> ìµœì¢… ì—…ë°ì´íŠ¸: 2026-02-02

---

## ê°œìš”

SSOO ë°±ì—”ë“œëŠ” **ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤(Modular Monolith)** ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•©ë‹ˆë‹¤.  
ë‹¨ì¼ ë°°í¬ ë‹¨ìœ„ë¥¼ ìœ ì§€í•˜ë©´ì„œ, ë‚´ë¶€ëŠ” ë„ë©”ì¸ ë‹¨ìœ„ë¡œ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.

### ì™œ ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤ì¸ê°€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì „í†µì  ëª¨ë†€ë¦¬ìŠ¤                          â”‚
â”‚  - ë¹ ë¥¸ ê°œë°œ, ë‹¨ìˆœí•œ ë°°í¬                                    â”‚
â”‚  - ê·œëª¨ ì»¤ì§€ë©´ ì˜ì¡´ì„± ì—‰í‚´, ë³€ê²½ ì˜í–¥ íŒŒì•… ì–´ë ¤ì›€              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ ë‹¨ì  ë³´ì™„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤                          â”‚
â”‚  - ë„ë©”ì¸ë³„ ëª¨ë“ˆ ë¶„ë¦¬ (ëª…í™•í•œ ê²½ê³„)                          â”‚
â”‚  - ë‹¨ì¼ ë°°í¬ ìœ ì§€ (ìš´ì˜ ë³µì¡ë„ â†“)                            â”‚
â”‚  - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜ ìš©ì´ (í•„ìš” ì‹œ)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ í•„ìš” ì‹œ ì „í™˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤                           â”‚
â”‚  - ë…ë¦½ ë°°í¬, ë…ë¦½ í™•ì¥                                      â”‚
â”‚  - ìš´ì˜ ë³µì¡ë„ â†‘, ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SSOOì˜ ì„ íƒ:**  
í˜„ì¬ ê·œëª¨ì—ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§. ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤ë¡œ ê²½ê³„ë¥¼ ëª…í™•íˆ ìœ ì§€í•˜ë‹¤ê°€, íŠ¸ë˜í”½/íŒ€ ê·œëª¨ê°€ ì»¤ì§€ë©´ íŠ¹ì • ëª¨ë“ˆë§Œ ë¶„ë¦¬ ê°€ëŠ¥.

---

## ëª¨ë“ˆ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ ë ˆì´ì•„ì›ƒ

```
apps/server/src/
â”œâ”€â”€ main.ts                    # ì§„ì…ì 
â”œâ”€â”€ app.module.ts              # ë£¨íŠ¸ ëª¨ë“ˆ
â”‚
â”œâ”€â”€ common/                    # ğŸ”§ ê³µìš© ì¸í”„ë¼ ë ˆì´ì–´
â”‚   â”œâ”€â”€ filters/               #   - ì „ì—­ ì˜ˆì™¸ í•„í„°
â”‚   â”œâ”€â”€ interceptors/          #   - ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ì¸í„°ì…‰í„°
â”‚   â”œâ”€â”€ swagger/               #   - Swagger ë°ì½”ë ˆì´í„°
â”‚   â”œâ”€â”€ utils/                 #   - BigInt ì§ë ¬í™” ë“±
â”‚   â””â”€â”€ responses.ts           #   - ApiSuccess/ApiError ì‘ë‹µ ë˜í¼
â”‚
â”œâ”€â”€ config/                    # âš™ï¸ í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ config.validation.ts   #   - Joi ê¸°ë°˜ í™˜ê²½ë³€ìˆ˜ ê²€ì¦
â”‚
â”œâ”€â”€ database/                  # ğŸ—„ï¸ ë°ì´í„° ì ‘ê·¼ ë ˆì´ì–´
â”‚   â”œâ”€â”€ database.module.ts     #   - Prisma ëª¨ë“ˆ
â”‚   â””â”€â”€ prisma.service.ts      #   - Prisma í´ë¼ì´ì–¸íŠ¸ ì„œë¹„ìŠ¤
â”‚
â””â”€â”€ modules/                   # ğŸ“¦ ë„ë©”ì¸ ëª¨ë“ˆ
    â”œâ”€â”€ common/                #   - ê³µí†µ ë„ë©”ì¸ (ì¸ì¦, ì‚¬ìš©ì)
    â”œâ”€â”€ pms/                   #   - PMS ë„ë©”ì¸ (ë©”ë‰´, í”„ë¡œì íŠ¸)
    â””â”€â”€ dms/                   #   - DMS ë„ë©”ì¸ (ë¬¸ì„œ ê´€ë¦¬) [ìŠ¬ë¡¯]
```

### ë„ë©”ì¸ ëª¨ë“ˆ ìƒì„¸

#### common ëª¨ë“ˆ (ê³µí†µ ë„ë©”ì¸)

ëª¨ë“  ì‹œìŠ¤í…œì—ì„œ ê³µìœ í•˜ëŠ” **ì¸ì¦/ì‚¬ìš©ì** ê´€ë ¨ ê¸°ëŠ¥.

```
modules/common/
â”œâ”€â”€ common.module.ts           # ëª¨ë“ˆ ì •ì˜
â”œâ”€â”€ auth/                      # ì¸ì¦
â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”œâ”€â”€ auth.controller.ts     # POST /api/auth/login, /refresh, /logout
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ strategies/            # JWT, Local ì „ëµ
â”‚   â”œâ”€â”€ guards/                # JwtAuthGuard
â”‚   â”œâ”€â”€ decorators/            # @CurrentUser
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ user/                      # ì‚¬ìš©ì
â”‚   â”œâ”€â”€ user.module.ts
â”‚   â”œâ”€â”€ user.controller.ts     # GET/POST /api/users
â”‚   â”œâ”€â”€ user.service.ts
â”‚   â””â”€â”€ dto/
â””â”€â”€ health/                    # í—¬ìŠ¤ì²´í¬
    â””â”€â”€ health.controller.ts   # GET /api/health
```

**DB ìŠ¤í‚¤ë§ˆ:** `common` (User, UserHistory)

#### pms ëª¨ë“ˆ (í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„ë©”ì¸)

PMS ì „ìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§.

```
modules/pms/
â”œâ”€â”€ pms.module.ts              # ëª¨ë“ˆ ì •ì˜
â”œâ”€â”€ menu/                      # ë©”ë‰´/ê¶Œí•œ
â”‚   â”œâ”€â”€ menu.module.ts
â”‚   â”œâ”€â”€ menu.controller.ts     # GET /api/menus/my, /tree
â”‚   â”œâ”€â”€ menu.service.ts
â”‚   â””â”€â”€ dto/
â””â”€â”€ project/                   # í”„ë¡œì íŠ¸
    â”œâ”€â”€ project.module.ts
    â”œâ”€â”€ project.controller.ts  # CRUD /api/projects
    â”œâ”€â”€ project.service.ts
    â””â”€â”€ dto/
```

**DB ìŠ¤í‚¤ë§ˆ:** `pms` (Menu, RoleMenu, Project, Customer, ë“±)

#### dms ëª¨ë“ˆ (ë¬¸ì„œ ê´€ë¦¬ ë„ë©”ì¸) [ë¯¸êµ¬í˜„]

DMS ì „ìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§. í˜„ì¬ëŠ” ìŠ¬ë¡¯ë§Œ ì¤€ë¹„.

```
modules/dms/                   # ë¹„ì–´ìˆìŒ - í–¥í›„ êµ¬í˜„
```

**DB ìŠ¤í‚¤ë§ˆ:** `dms` (í–¥í›„ ì¶”ê°€)

---

## ëª¨ë“ˆ ì˜ì¡´ì„± ê·œì¹™

### í•µì‹¬ ì›ì¹™

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ app.module  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ imports
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ common   â”‚ â”‚   pms    â”‚ â”‚   dms    â”‚
        â”‚ Module   â”‚ â”‚  Module  â”‚ â”‚  Module  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â”‚            â–¼            â”‚
              â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
              â””â”€â”€â”€â”€â”€â–¶â”‚ database â”‚â—€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚  Module  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì˜ì¡´ì„± ë°©í–¥

| From | To | í—ˆìš© ì—¬ë¶€ |
|------|-----|----------|
| `pms` | `common` | âŒ ê¸ˆì§€ |
| `common` | `pms` | âŒ ê¸ˆì§€ |
| `pms` | `dms` | âŒ ê¸ˆì§€ |
| `*` | `database` | âœ… í—ˆìš© |
| `*` | `common/` (ì¸í”„ë¼) | âœ… í—ˆìš© |

> **ì›ì¹™:** ë„ë©”ì¸ ëª¨ë“ˆ ê°„ ì§ì ‘ ì˜ì¡´ ê¸ˆì§€. ê³µìœ  í•„ìš” ì‹œ `database` ë˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  ì‚¬ìš©.

### ESLint ê°•ì œ

[eslint.config.mjs](../../../apps/server/eslint.config.mjs)ì—ì„œ ëª¨ë“ˆ ê²½ê³„ë¥¼ ë¦°íŠ¸ ê·œì¹™ìœ¼ë¡œ ê°•ì œí•©ë‹ˆë‹¤:

```javascript
'import/no-restricted-paths': [
  'error',
  {
    zones: [
      {
        target: './src/modules/common',
        from: './src/modules/pms',
        message: 'pms ëª¨ë“ˆì€ commonì„ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ commonì€ pmsë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      },
      {
        target: './src/modules/pms',
        from: './src/modules/common',
        message: 'ë„ë©”ì¸ ì˜ì¡´ì„±ì€ í•œ ë°©í–¥(pms -> common)ë§Œ í—ˆìš©ë©ë‹ˆë‹¤.',
      },
    ],
  },
],
```

**ìœ„ë°˜ ì‹œ ë¹Œë“œ/ë¦°íŠ¸ ì‹¤íŒ¨.**

---

## ëª¨ë“ˆ ê°„ í†µì‹ 

### í˜„ì¬ ë°©ì‹: ì§ì ‘ í˜¸ì¶œ ì—†ìŒ

ë„ë©”ì¸ ëª¨ë“ˆë¼ë¦¬ ì§ì ‘ importí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
ë°ì´í„° ê³µìœ ê°€ í•„ìš”í•˜ë©´ `database` ë ˆì´ì–´ë¥¼ í†µí•´ ì ‘ê·¼í•©ë‹ˆë‹¤.

```typescript
// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹: database ë ˆì´ì–´ ì‚¬ìš©
@Injectable()
export class ProjectService {
  constructor(private prisma: PrismaService) {}

  async createProject(dto: CreateProjectDto, userId: bigint) {
    // UserëŠ” common ìŠ¤í‚¤ë§ˆì— ìˆì§€ë§Œ, prismaë¥¼ í†µí•´ ì ‘ê·¼
    return this.prisma.project.create({
      data: {
        ...dto,
        ownerId: userId,  // userIdëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @CurrentUserë¡œ ë°›ìŒ
      },
    });
  }
}
```

```typescript
// âŒ ì˜ëª»ëœ ë°©ì‹: ë„ë©”ì¸ ëª¨ë“ˆ ì§ì ‘ import
import { UserService } from '../../common/user/user.service';  // ESLint ì—ëŸ¬!
```

### í–¥í›„ í™•ì¥: ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ 

ê·œëª¨ê°€ ì»¤ì§€ë©´ NestJS EventEmitter ë˜ëŠ” ë©”ì‹œì§€ íë¥¼ ë„ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
// ì˜ˆì‹œ: í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ì´ë²¤íŠ¸ ë°œí–‰
this.eventEmitter.emit('project.created', { projectId, ownerId });

// common ëª¨ë“ˆì—ì„œ ì´ë²¤íŠ¸ êµ¬ë… (í•„ìš” ì‹œ)
@OnEvent('project.created')
handleProjectCreated(payload: ProjectCreatedEvent) {
  // ì‚¬ìš©ì í™œë™ ë¡œê·¸ ê¸°ë¡ ë“±
}
```

---

## DB ìŠ¤í‚¤ë§ˆ ë§¤í•‘

ëª¨ë“ˆê³¼ PostgreSQL ìŠ¤í‚¤ë§ˆëŠ” 1:1 ëŒ€ì‘í•©ë‹ˆë‹¤:

| ëª¨ë“ˆ | DB ìŠ¤í‚¤ë§ˆ | í…Œì´ë¸” ì ‘ë‘ì‚¬ | í…Œì´ë¸” ìˆ˜ |
|------|-----------|--------------|-----------|
| `common` | `common` | `cm_user_*` | 2ê°œ |
| `pms` | `pms` | `cm_*`, `pr_*` | 27ê°œ |
| `dms` | `dms` | `dm_*` | 0ê°œ (ì˜ˆì •) |

ìì„¸í•œ ë‚´ìš©ì€ [database README](../../../packages/database/README.md) ì°¸ì¡°.

---

## ìƒˆ ëª¨ë“ˆ ì¶”ê°€ ê°€ì´ë“œ

### 1. ëª¨ë“ˆ ë””ë ‰í† ë¦¬ ìƒì„±

```bash
mkdir -p apps/server/src/modules/newdomain
```

### 2. ëª¨ë“ˆ íŒŒì¼ êµ¬ì¡°

```
modules/newdomain/
â”œâ”€â”€ newdomain.module.ts
â”œâ”€â”€ feature1/
â”‚   â”œâ”€â”€ feature1.module.ts
â”‚   â”œâ”€â”€ feature1.controller.ts
â”‚   â”œâ”€â”€ feature1.service.ts
â”‚   â””â”€â”€ dto/
â””â”€â”€ feature2/
    â””â”€â”€ ...
```

### 3. ëª¨ë“ˆ ì •ì˜

```typescript
// newdomain.module.ts
import { Module } from '@nestjs/common';
import { Feature1Module } from './feature1/feature1.module';

@Module({
  imports: [Feature1Module],
  exports: [Feature1Module],
})
export class NewDomainModule {}
```

### 4. ë£¨íŠ¸ ëª¨ë“ˆì— ë“±ë¡

```typescript
// app.module.ts
import { NewDomainModule } from './modules/newdomain/newdomain.module';

@Module({
  imports: [
    // ...
    CommonModule,
    PmsModule,
    NewDomainModule,  // ì¶”ê°€
  ],
})
export class AppModule {}
```

### 5. ESLint ê·œì¹™ ì¶”ê°€ (í•„ìš” ì‹œ)

ìƒˆ ëª¨ë“ˆê³¼ ê¸°ì¡´ ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

### 6. DB ìŠ¤í‚¤ë§ˆ ì¶”ê°€ (í•„ìš” ì‹œ)

```prisma
// schema.prisma
datasource db {
  schemas = ["common", "pms", "dms", "newdomain"]  // ì¶”ê°€
}

model NewEntity {
  // ...
  @@schema("newdomain")
}
```

---

## ê´€ë ¨ ë¬¸ì„œ

- [tech-stack.md](./tech-stack.md) - ê¸°ìˆ  ìŠ¤íƒ ê°œìš”
- [development-standards.md](./development-standards.md) - ê°œë°œ í‘œì¤€
- [database README](../../../packages/database/README.md) - DB ìŠ¤í‚¤ë§ˆ ìƒì„¸
- [auth-system.md](./auth-system.md) - ì¸ì¦ ì‹œìŠ¤í…œ

---

## Changelog

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| 2026-01-23 | ëª¨ë“ˆëŸ¬ ëª¨ë†€ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ ë¬¸ì„œ ìµœì´ˆ ì‘ì„± |
