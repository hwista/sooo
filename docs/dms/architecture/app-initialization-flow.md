# DMS ì•± ì´ˆê¸°í™” íë¦„

> **ì‘ì„±ì¼**: 2026-01-29  
> **ëª©ì **: DMS ì•±ì˜ í˜„ì¬ ì´ˆê¸°í™” íë¦„ ë¶„ì„ + PMS ë¹„êµ + ê°œì„  ê³„íš

---

## ğŸ“Š í˜„ì¬ DMS ì´ˆê¸°í™” íë¦„ (Before)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Root Layout (app/layout.tsx)                                              â”‚
â”‚    â”œâ”€ 'use client' (í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸)                                      â”‚
â”‚    â”œâ”€ í°íŠ¸ ì„¤ì • (Geist Sans/Mono)                                            â”‚
â”‚    â””â”€ <Toaster /> (sonner)                                                   â”‚
â”‚         â””â”€ {children}                                                        â”‚
â”‚                                                                              â”‚
â”‚    âš ï¸ ì°¨ì´ì : Providers ì—†ìŒ (QueryClientProvider ì—†ìŒ)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Main Layout (app/(main)/layout.tsx)                                       â”‚
â”‚    â”œâ”€ useEffect:                                                             â”‚
â”‚    â”‚     â”œâ”€ initializeDeviceType() - ë””ë°”ì´ìŠ¤ íƒ€ì… ê°ì§€                        â”‚
â”‚    â”‚     â””â”€ refreshFileTree() - Server Actionìœ¼ë¡œ íŒŒì¼ íŠ¸ë¦¬ ë¡œë“œ              â”‚
â”‚    â”œâ”€ window.resize ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ                                             â”‚
â”‚    â””â”€ return <AppLayout>{children}</AppLayout>                               â”‚
â”‚                                                                              â”‚
â”‚    âš ï¸ ì°¨ì´ì : Auth ì²´í¬ ì—†ìŒ (DMSëŠ” í˜„ì¬ ì¸ì¦ ë¯¸ì‚¬ìš©)                          â”‚
â”‚    âœ… ì˜ë„ì  ì°¨ì´: Server Action ì‚¬ìš© (PMSëŠ” API)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. AppLayout (components/layout/AppLayout.tsx)                               â”‚
â”‚    â”œâ”€ useLayoutStore: deviceType                                             â”‚
â”‚    â”œâ”€ ì¡°ê±´ë¶€ ë Œë”ë§:                                                          â”‚
â”‚    â”‚     â”œâ”€ (deviceType === 'mobile') â†’ "ëª¨ë°”ì¼ ì¤€ë¹„ ì¤‘" ë©”ì‹œì§€               â”‚
â”‚    â”‚     â””â”€ (else) â†’ Desktop ë ˆì´ì•„ì›ƒ                                        â”‚
â”‚    â””â”€ Desktop êµ¬ì¡°:                                                          â”‚
â”‚         â”œâ”€ MainSidebar (ê³ ì • ë„ˆë¹„, ì ‘ê¸° ì—†ìŒ)                                  â”‚
â”‚         â””â”€ Main Area (marginLeft: 240px)                                     â”‚
â”‚              â”œâ”€ Header                                                       â”‚
â”‚              â”œâ”€ TabBar                                                       â”‚
â”‚              â””â”€ ContentArea                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. MainSidebar (components/layout/MainSidebar.tsx)                           â”‚
â”‚    â”œâ”€ í—¤ë”: ë¡œê³  + ì œëª©                                                       â”‚
â”‚    â”œâ”€ ê²€ìƒ‰ ë°•ìŠ¤ (SearchBox)                                                   â”‚
â”‚    â””â”€ SidebarFileTree                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. ContentArea (components/layout/ContentArea.tsx)                           â”‚
â”‚    â”œâ”€ useTabStore: activeTabId, tabs                                         â”‚
â”‚    â”œâ”€ ì¡°ê±´ë¶€ ë Œë”ë§ (if/else ë¶„ê¸°):                                           â”‚
â”‚    â”‚     â”œâ”€ (!activeTab) â†’ "íƒ­ì„ ì„ íƒí•´ì£¼ì„¸ìš”" ë©”ì‹œì§€                          â”‚
â”‚    â”‚     â”œâ”€ (HOME_TAB) â†’ ì¸ë¼ì¸ Home ëŒ€ì‹œë³´ë“œ JSX                             â”‚
â”‚    â”‚     â”œâ”€ (/ai-search) â†’ ì¸ë¼ì¸ AI ê²€ìƒ‰ JSX                                 â”‚
â”‚    â”‚     â””â”€ (else) â†’ children ë˜ëŠ” "ë¡œë”© ì¤‘..." ë©”ì‹œì§€                        â”‚
â”‚                                                                              â”‚
â”‚    âŒ ë¬¸ì œì : pageComponents íŒ¨í„´ ì—†ìŒ                                         â”‚
â”‚    âŒ ë¬¸ì œì : í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ì—†ì–´ì„œ children ì˜ì¡´                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. íŒŒì¼ í´ë¦­ ì‹œ (SidebarFileTree â†’ handleClick)                               â”‚
â”‚    â”œâ”€ selectFile(node.path) âœ… ì„ íƒ ìƒíƒœ ì €ì¥                                 â”‚
â”‚    â””â”€ openTab({ path: '/wiki/...', ... }) âœ… íƒ­ ì—´ê¸°                          â”‚
â”‚                                                                              â”‚
â”‚    âŒ ë¬¸ì œì : loadFile() í˜¸ì¶œ ì—†ìŒ â†’ íŒŒì¼ ë‚´ìš© ë¯¸ë¡œë“œ                          â”‚
â”‚    âŒ ê²°ê³¼: íƒ­ì€ ì—´ë¦¬ì§€ë§Œ ë¹ˆ í™”ë©´                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” PMS vs DMS ë¹„êµ ë¶„ì„

### ë ˆì´ì–´ë³„ ë¹„êµ

| ë ˆì´ì–´ | PMS | DMS (í˜„ì¬) | ì°¨ì´ ì›ì¸ |
|--------|-----|------------|-----------|
| **Root Layout** | Providers (QueryClient) | í°íŠ¸ + Toasterë§Œ | API í´ë¼ì´ì–¸íŠ¸ ë¯¸ë„ì… |
| **Main Layout** | Auth ì²´í¬ â†’ ì¡°ê±´ë¶€ ë Œë” | AppLayout ì§ì ‘ | ì¸ì¦ ë¯¸ì‚¬ìš© (ì˜ë„ì ) |
| **ë°ì´í„° ë¡œë“œ** | API â†’ refreshMenu() | Server Action â†’ refreshFileTree() | âœ… ì˜ë„ì  ì°¨ì´ |
| **ContentArea** | `pageComponents` ë§¤í•‘ | if/else ë¶„ê¸° | âŒ ê°œì„  í•„ìš” |
| **í˜ì´ì§€ ë¡œë”©** | React.lazy ë™ì  import | ì—†ìŒ (children ì˜ì¡´) | âŒ ê°œì„  í•„ìš” |
| **ì‚¬ì´ë“œë°” í´ë¦­** | openTab() ë§Œ | selectFile() + openTab() | âŒ loadFile() ëˆ„ë½ |
| **ë°ì´í„° ì±…ì„** | í˜ì´ì§€ê°€ ìì²´ ë¡œë“œ | ë¶ˆëª…í™• (í˜ì´ì§€ ì—†ìŒ) | âŒ ê°œì„  í•„ìš” |

### í•µì‹¬ íë¦„ ë¹„êµ

```
â”Œâ”€ PMS íŒ¨í„´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   SidebarMenuTree             ContentArea                   PageComponent    â”‚
â”‚        â”‚                          â”‚                              â”‚           â”‚
â”‚        â”‚ openTab()                â”‚                              â”‚           â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ pageComponents[path]         â”‚           â”‚
â”‚        â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
â”‚        â”‚                          â”‚ <Suspense>                   â”‚           â”‚
â”‚        â”‚                          â”‚   <PageComponent />          â”‚ useQuery()â”‚
â”‚        â”‚                          â”‚ </Suspense>                  â”‚ fetchData â”‚
â”‚        â”‚                          â”‚                              â”‚           â”‚
â”‚   âœ… íƒ­ë§Œ ì—´ê¸°                    âœ… ë™ì  ë¡œë”©                   âœ… ìì²´ ë¡œë“œ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ DMS í˜„ì¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   SidebarFileTree             ContentArea                   ???              â”‚
â”‚        â”‚                          â”‚                              â”‚           â”‚
â”‚        â”‚ selectFile()             â”‚                              â”‚           â”‚
â”‚        â”‚ openTab()                â”‚ if/else ë¶„ê¸°                 â”‚           â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   (HOME_TAB) â†’ JSX          â”‚           â”‚
â”‚        â”‚                          â”‚   (/ai-search) â†’ JSX        â”‚           â”‚
â”‚        â”‚                          â”‚   (else) â†’ children          â”‚           â”‚
â”‚        â”‚                          â”‚                              â”‚           â”‚
â”‚   âŒ loadFile() ì—†ìŒ             âŒ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ì—†ìŒ       âŒ ë°ì´í„° ë¡œë“œ ì•ˆë¨ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ëª©í‘œ: DMS ê°œì„  í›„ íë¦„ (After)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Root Layout (app/layout.tsx) - ë³€ê²½ ì—†ìŒ                                  â”‚
â”‚    â”œâ”€ í°íŠ¸ ì„¤ì •                                                              â”‚
â”‚    â””â”€ <Toaster />                                                            â”‚
â”‚         â””â”€ {children}                                                        â”‚
â”‚                                                                              â”‚
â”‚    ğŸ’¡ Phase 4ì—ì„œ Providers ì¶”ê°€ ê²€í†  (react-query ë„ì… ì‹œ)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Main Layout (app/(main)/layout.tsx) - ë³€ê²½ ì—†ìŒ                           â”‚
â”‚    â”œâ”€ useEffect: initializeDeviceType() + refreshFileTree()                  â”‚
â”‚    â””â”€ return <AppLayout>{children}</AppLayout>                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. AppLayout (components/layout/AppLayout.tsx) - ë³€ê²½ ì—†ìŒ                   â”‚
â”‚    â””â”€ Desktop: MainSidebar + Header + TabBar + ContentArea                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. MainSidebar - ë³€ê²½ ì—†ìŒ                                                   â”‚
â”‚    â””â”€ SearchBox + SidebarFileTree                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. ContentArea (components/layout/ContentArea.tsx) - â­ ì£¼ìš” ë³€ê²½            â”‚
â”‚    â”œâ”€ pageComponents ë§¤í•‘ ì¶”ê°€ (React.lazy):                                 â”‚
â”‚    â”‚     â”œâ”€ '/wiki': WikiHomePage                                            â”‚
â”‚    â”‚     â”œâ”€ '/wiki/:path': WikiViewerPage                                    â”‚
â”‚    â”‚     â””â”€ '/ai-search': AISearchPage                                       â”‚
â”‚    â””â”€ <Suspense><PageComponent /></Suspense>                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. íŒŒì¼ í´ë¦­ ì‹œ (SidebarFileTree) - â­ ê°„ì†Œí™”                                â”‚
â”‚    â””â”€ openTab({ path: '/wiki/...', ... }) â† selectFile() ì œê±° ê°€ëŠ¥           â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚    WikiViewerPage (ìì²´ ë¡œë”©):                                               â”‚
â”‚    â”œâ”€ URLì—ì„œ path ì¶”ì¶œ                                                      â”‚
â”‚    â”œâ”€ useEffect: loadFile(path) ìë™ í˜¸ì¶œ                                    â”‚
â”‚    â””â”€ ì—ë””í„°/ë·°ì–´ ë Œë”ë§                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Store ì—°ë™ íë¦„ ë¹„êµ

### í˜„ì¬ (Before)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   selectFile()   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚SidebarFileTreeâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  TreeStore   â”‚
â”‚              â”‚                   â”‚              â”‚
â”‚ handleClick  â”‚   openTab()      â”‚ selectedFile â”‚
â”‚              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ (ì—°ê²° ì•ˆë¨)
                  â”‚   TabStore   â”‚        â”‚
                  â”‚              â”‚        â”‚
                  â”‚ tabs[]       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ activeTabId  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ ContentArea  â”‚
                  â”‚              â”‚
                  â”‚ if/else ë¶„ê¸° â”‚
                  â”‚ children ???  â”‚ â† âŒ ë°ì´í„° ë¡œë”© ì—†ìŒ
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê°œì„  í›„ (After)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   openTab()   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SidebarFileTree â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   TabStore   â”‚
â”‚                 â”‚               â”‚              â”‚
â”‚ handleClick     â”‚               â”‚ tabs[]       â”‚
â”‚                 â”‚               â”‚ activeTabId  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ ContentArea  â”‚
                                  â”‚              â”‚
                                  â”‚ pageComp[path]â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚WikiViewerPageâ”‚
                                  â”‚              â”‚
                                  â”‚ useEffect:   â”‚
                                  â”‚  loadFile()  â”‚ â† âœ… ìë™ ë¡œë“œ
                                  â”‚              â”‚
                                  â”‚ TreeStore â—„â”€â”€â”¤
                                  â”‚  fileContent â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë³€ê²½ë  íŒŒì¼ êµ¬ì¡°

### í˜„ì¬ êµ¬ì¡°

```
src/components/
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ AppLayout.tsx
â”‚   â”œâ”€â”€ ContentArea.tsx      â† if/else ë¶„ê¸°
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ MainSidebar.tsx
â”‚   â”œâ”€â”€ TabBar.tsx
â”‚   â””â”€â”€ sidebar/
â”‚       â””â”€â”€ SidebarFileTree.tsx  â† selectFile + openTab
â””â”€â”€ editor/
    â””â”€â”€ (ì—ë””í„° ì»´í¬ë„ŒíŠ¸ë“¤)
```

### ê°œì„  í›„ êµ¬ì¡°

```
src/components/
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ AppLayout.tsx
â”‚   â”œâ”€â”€ ContentArea.tsx      â† pageComponents íŒ¨í„´
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ MainSidebar.tsx
â”‚   â”œâ”€â”€ TabBar.tsx
â”‚   â””â”€â”€ sidebar/
â”‚       â””â”€â”€ SidebarFileTree.tsx  â† openTabë§Œ
â”œâ”€â”€ pages/                   â† â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ wiki/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ WikiHomePage.tsx     â† Home ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â””â”€â”€ WikiViewerPage.tsx   â† ë¬¸ì„œ ë·°ì–´ (loadFile ìë™)
â”‚   â””â”€â”€ ai/
â”‚       â”œâ”€â”€ index.ts
â”‚       â””â”€â”€ AISearchPage.tsx     â† AI ê²€ìƒ‰
â””â”€â”€ editor/
    â””â”€â”€ (ì—ë””í„° ì»´í¬ë„ŒíŠ¸ë“¤)       â† ì¬ì‚¬ìš©
```

---

## âœ… ê°œì„  ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 3-A: í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìƒì„±

- [ ] `components/pages/wiki/WikiHomePage.tsx`
  - ContentAreaì˜ Home íƒ­ JSX ì´ë™
  - ë¹ ë¥¸ ì•¡ì…˜, ìµœê·¼ ë¬¸ì„œ ë“±

- [ ] `components/pages/wiki/WikiViewerPage.tsx`
  - URLì—ì„œ path íŒŒë¼ë¯¸í„° ì¶”ì¶œ
  - useEffectë¡œ `loadFile(path)` í˜¸ì¶œ
  - TreeStoreì˜ `fileContent` ì‚¬ìš©
  - ì—ë””í„°/ë·°ì–´ ì»´í¬ë„ŒíŠ¸ í†µí•©

- [ ] `components/pages/ai/AISearchPage.tsx`
  - ContentAreaì˜ AI ê²€ìƒ‰ JSX ì´ë™
  - ê²€ìƒ‰ ì¿¼ë¦¬ ì²˜ë¦¬ ë¡œì§

### Phase 3-B: ContentArea ë¦¬íŒ©í† ë§

```typescript
// ë³€ê²½ ì „
if (activeTab.id === HOME_TAB.id) {
  return <main>...</main>;  // ì¸ë¼ì¸ JSX
}
if (activeTab.path.startsWith('/ai-search')) {
  return <main>...</main>;  // ì¸ë¼ì¸ JSX
}
return <main>{children}</main>;

// ë³€ê²½ í›„
const pageComponents = {
  '/wiki': lazy(() => import('@/components/pages/wiki/WikiHomePage')),
  '/ai-search': lazy(() => import('@/components/pages/ai/AISearchPage')),
};

// /wiki/:path íŒ¨í„´ ë§¤ì¹­
const PageComponent = getPageComponent(activeTab.path);
return (
  <Suspense fallback={<Loading />}>
    <PageComponent />
  </Suspense>
);
```

### Phase 3-C: SidebarFileTree ê°„ì†Œí™”

```typescript
// ë³€ê²½ ì „
const handleClick = () => {
  if (isFolder) {
    toggleFolder(node.path);
  } else {
    selectFile(node.path);     // â† ì œê±° ë˜ëŠ” WikiViewerPageë¡œ ì´ë™
    openTab({ ... });
  }
};

// ë³€ê²½ í›„
const handleClick = () => {
  if (isFolder) {
    toggleFolder(node.path);
  } else {
    openTab({ ... });          // íƒ­ë§Œ ì—´ê¸°
    // WikiViewerPageê°€ ë§ˆìš´íŠ¸ë˜ë©° ìë™ìœ¼ë¡œ loadFile() í˜¸ì¶œ
  }
};
```

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [PMS ì•± ì´ˆê¸°í™” íë¦„](../../pms/architecture/app-initialization-flow.md) - ì°¸ì¡° íŒ¨í„´
- [í†µí•© ë¦¬íŒ©í„°ë§ ê³„íšì„œ](./package-integration-plan.md) - Phase 3 ìƒì„¸ ê³„íš
- [ì™„ë£Œ ë‚´ì—­ ì•„ì¹´ì´ë¸Œ](./package-integration-completed.md) - Phase 0~2

---

## ğŸ“ ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë‚´ìš© |
|------|------|
| 2026-01-29 | ì´ˆì•ˆ ì‘ì„± - í˜„ì¬ íë¦„ + PMS ë¹„êµ + ê°œì„  ê³„íš |
