# PMS-DMS íŒ¨í‚¤ì§€ ê³µìš©í™” ë¶„ì„

> **ë¬¸ì„œ ëª©ì **: ì¥ê¸°ì  ê´€ì ì—ì„œ PMSì™€ DMSì˜ ê³µí†µ ëª¨ë“ˆì„ ëª¨ë…¸ë ˆí¬ íŒ¨í‚¤ì§€ë¡œ í†µí•©í•˜ê¸° ìœ„í•œ ë¶„ì„
> **ì‘ì„±ì¼**: 2026-01-29
> **ìƒíƒœ**: ğŸ“‹ ë¶„ì„ ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°

---

## 1. ê°œìš”

### 1.1 ëª©í‘œ
- PMSì™€ DMSì˜ ê³µí†µ ì»´í¬ë„ŒíŠ¸/ìœ í‹¸ë¦¬í‹°ë¥¼ `packages/` í•˜ìœ„ë¡œ ì¶”ì¶œ
- ì½”ë“œ ì¤‘ë³µ ì œê±° ë° ì¼ê´€ì„± ìœ ì§€
- ìœ ì§€ë³´ìˆ˜ íš¨ìœ¨ì„± í–¥ìƒ

### 1.2 í˜„ì¬ êµ¬ì¡°
```
hwista-ssoo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/pms/          # í”„ë¡œì íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ web/dms/          # ë¬¸ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ
â””â”€â”€ packages/
    â”œâ”€â”€ database/         # Prisma ìŠ¤í‚¤ë§ˆ (ê³µìš©)
    â””â”€â”€ types/            # ê³µìš© íƒ€ì… (í˜„ì¬ ë¯¸ì‚¬ìš©)
```

---

## 2. ìƒì„¸ ë¹„êµ ë¶„ì„

### 2.1 ì•± ì´ˆê¸°í™” íë¦„

| ì˜ì—­ | PMS | DMS | ê³µìš©í™” ê°€ëŠ¥ì„± |
|------|-----|-----|--------------|
| **ì¸ì¦** | `useAuthStore` + JWT í† í° | `useUserStore` (ë¡œì»¬ ì‚¬ìš©ì) | âš ï¸ ë³„ë„ ìœ ì§€ |
| **ë ˆì´ì•„ì›ƒ ì§„ì…** | ì¸ì¦ ì²´í¬ â†’ ë¡œê·¸ì¸ í¼ â†’ `AppLayout` | ë””ë°”ì´ìŠ¤ ê°ì§€ â†’ `AppLayout` | âš ï¸ íŒ¨í„´ ìœ ì‚¬ |
| **ë°ì´í„° ë¡œë“œ** | `useMenuStore.refreshMenu()` | `useTreeStore.refreshFileTree()` | âš ï¸ ì¸í„°í˜ì´ìŠ¤ í†µì¼ ê°€ëŠ¥ |

### 2.2 Store êµ¬ì¡°

| Store | PMS | DMS | ì°¨ì´ì  |
|-------|-----|-----|--------|
| **Tab Store** | `menuCode`, `menuId`, `params` ê¸°ë°˜ | `id`, `path` ê¸°ë°˜ | ğŸ”´ íƒ­ ì‹ë³„ ë°©ì‹ ë‹¤ë¦„ |
| **Layout Store** | `deviceType`, `isMobileMenuOpen` | + `documentType`, `expandedFolders` | ğŸŸ¡ DMSê°€ ë” ë§ì€ ìƒíƒœ |
| **Sidebar Store** | ë³„ë„ ì¡´ì¬ | Layout Storeì— í†µí•© | ğŸ”´ ë¶„ë¦¬ vs í†µí•© |
| **Auth Store** | JWT ê¸°ë°˜ ì¸ì¦ | ê°„ë‹¨í•œ ë¡œì»¬ ì‚¬ìš©ì | ğŸ”´ ë³µì¡ë„ ë‹¤ë¦„ |

#### Tab íƒ€ì… ë¹„êµ

```typescript
// PMS TabItem
interface TabItem {
  id: string;
  menuCode: string;      // âœ… PMS ì „ìš©
  menuId: string;        // âœ… PMS ì „ìš©
  title: string;
  icon?: string;
  path?: string;
  closable: boolean;
  status: TabStatus;     // âœ… PMS ì „ìš©
  params?: Record<string, string>;  // âœ… PMS ì „ìš©
  data?: unknown;        // âœ… PMS ì „ìš©
  openedAt: Date;
  lastActiveAt: Date;
}

// DMS TabItem
interface TabItem {
  id: string;
  title: string;
  path: string;          // âœ… í•„ìˆ˜ (PMSëŠ” optional)
  icon?: string;
  closable: boolean;
  openedAt: Date;
  lastActiveAt: Date;
}
```

### 2.3 Layout ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | PMS | DMS | ê³µìš©í™” |
|----------|-----|-----|--------|
| **AppLayout** | `children` prop ì‚¬ìš© | `children` ì œê±°ë¨ | ğŸŸ¡ íŒ¨í„´ ë‹¤ë¦„ |
| **ContentArea** | `pageComponents` + `children` fallback | `pageComponents` only | âœ… ìœ ì‚¬ |
| **MainSidebar** | í¼ì¹¨/ì ‘í˜ + í”Œë¡œíŒ… | í•­ìƒ í¼ì¹¨ | ğŸ”´ ê¸°ëŠ¥ ì°¨ì´ |
| **Header** | ìœ ì‚¬ | ìœ ì‚¬ | âœ… ê³µìš©í™” ê°€ëŠ¥ |
| **TabBar** | ìœ ì‚¬ | ìœ ì‚¬ | âœ… ê³µìš©í™” ê°€ëŠ¥ |

### 2.4 ì‚¬ì´ë“œë°” êµ¬ì¡°

```
PMS MainSidebar/
â”œâ”€â”€ MainSidebar.tsx       # ë©”ì¸ ì»¨í…Œì´ë„ˆ
â”œâ”€â”€ CollapsedSidebar.tsx  # ì ‘íŒ ìƒíƒœ (ì•„ì´ì½˜ë§Œ)
â”œâ”€â”€ ExpandedSidebar.tsx   # í¼ì¹œ ìƒíƒœ
â”œâ”€â”€ FloatingPanel.tsx     # hover í”Œë¡œíŒ…
â””â”€â”€ SidebarSection.tsx    # ê³µí†µ ì„¹ì…˜

DMS sidebar/
â”œâ”€â”€ SidebarSection.tsx    # ê³µí†µ ì„¹ì…˜ âœ…
â”œâ”€â”€ SidebarBookmarks.tsx  # ì±…ê°ˆí”¼
â”œâ”€â”€ SidebarOpenTabs.tsx   # ì—´ë¦° íƒ­ âœ…
â”œâ”€â”€ SidebarFileTree.tsx   # íŒŒì¼ íŠ¸ë¦¬
â””â”€â”€ SidebarSearch.tsx     # ê²€ìƒ‰
```

### 2.5 API ë ˆì´ì–´

| ì˜ì—­ | PMS | DMS |
|------|-----|-----|
| **HTTP í´ë¼ì´ì–¸íŠ¸** | `axios` + interceptor | `fetch` ê¸°ë°˜ |
| **ì¸ì¦ ì²˜ë¦¬** | ìë™ í† í° ê°±ì‹  | ì—†ìŒ |
| **API êµ¬ì¡°** | `lib/api/` ë„ë©”ì¸ë³„ ë¶„ë¦¬ | `lib/utils/apiClient.ts` ë‹¨ì¼ íŒŒì¼ |
| **ì„œë²„ í†µì‹ ** | ì™¸ë¶€ ë°±ì—”ë“œ (NestJS) | Next.js API Routes (ë¡œì»¬) |

---

## 3. ê³µìš©í™” ìš°ì„ ìˆœìœ„

### 3.1 ì¦‰ì‹œ ê°€ëŠ¥ (â­â­â­)

| ëª¨ë“ˆ | í˜„ì¬ ìœ„ì¹˜ | ì¶”ì¶œ ëŒ€ìƒ |
|------|----------|----------|
| **UI ì»´í¬ë„ŒíŠ¸** | `apps/web/*/src/components/ui/` | `packages/ui/` |
| **ë ˆì´ì•„ì›ƒ ìƒìˆ˜** | ê° ì•± `types/layout.ts` | `packages/layout-core/` |
| **ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜** | ê° ì•± `lib/utils/` | `packages/utils/` |

### 3.2 ë‹¨ê¸° (â­â­)

| ëª¨ë“ˆ | ì‘ì—… ë‚´ìš© |
|------|----------|
| **TabBar** | ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ì¶”ìƒí™” |
| **Header** | ìŠ¬ë¡¯ íŒ¨í„´ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ê²Œ |
| **SidebarSection** | ê³µí†µ ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ |

### 3.3 ì¥ê¸° (â­)

| ëª¨ë“ˆ | ì‘ì—… ë‚´ìš© |
|------|----------|
| **Tab Store Factory** | ì œë„¤ë¦­ ìŠ¤í† ì–´ íŒ©í† ë¦¬ í•¨ìˆ˜ |
| **Layout Store Factory** | í™•ì¥ ê°€ëŠ¥í•œ ë ˆì´ì•„ì›ƒ ìŠ¤í† ì–´ |

### 3.4 ë³„ë„ ìœ ì§€ ê¶Œì¥ (ğŸ”´)

| ëª¨ë“ˆ | ì´ìœ  |
|------|------|
| **Auth Store** | ë„ë©”ì¸ íŠ¹í™”, ë³µì¡ë„ ì°¨ì´ |
| **Menu/Tree Store** | ë°ì´í„° êµ¬ì¡° ê·¼ë³¸ì  ì°¨ì´ |
| **API ë ˆì´ì–´** | ì„œë²„ í†µì‹  ë°©ì‹ ë‹¤ë¦„ |

---

## 4. ê¶Œì¥ íŒ¨í‚¤ì§€ êµ¬ì¡°

```
packages/
â”œâ”€â”€ ui/                    # âœ… 1ì°¨ ê³µìš©í™”
â”‚   â”œâ”€â”€ button/
â”‚   â”œâ”€â”€ input/
â”‚   â”œâ”€â”€ card/
â”‚   â”œâ”€â”€ scroll-area/
â”‚   â”œâ”€â”€ dropdown/
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ layout-core/           # â­â­ 2ì°¨ ê³µìš©í™”
â”‚   â”œâ”€â”€ constants.ts       # LAYOUT_SIZES, BREAKPOINTS
â”‚   â”œâ”€â”€ types.ts           # DeviceType, ê³µí†µ íƒ€ì…
â”‚   â”œâ”€â”€ TabBar/            # ì œë„¤ë¦­ íƒ­ë°”
â”‚   â”œâ”€â”€ Header/            # ê¸°ë³¸ í—¤ë” (ìŠ¬ë¡¯ íŒ¨í„´)
â”‚   â””â”€â”€ SidebarSection/    # ê³µí†µ ì„¹ì…˜
â”‚
â”œâ”€â”€ store-utils/           # â­ 3ì°¨ ê³µìš©í™”
â”‚   â”œâ”€â”€ createTabStore.ts
â”‚   â””â”€â”€ createLayoutStore.ts
â”‚
â”œâ”€â”€ database/              # ê¸°ì¡´ ìœ ì§€
â””â”€â”€ types/                 # ê¸°ì¡´ ìœ ì§€ (ê³µìš© íƒ€ì… ì¶”ê°€)
```

---

## 5. êµ¬í˜„ ë¡œë“œë§µ

### Phase A: UI íŒ¨í‚¤ì§€ ì¶”ì¶œ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)
- [ ] `packages/ui/` ìƒì„±
- [ ] ê³µí†µ UI ì»´í¬ë„ŒíŠ¸ ì´ë™
- [ ] ê° ì•±ì—ì„œ import ê²½ë¡œ ë³€ê²½
- [ ] ìŠ¤í† ë¦¬ë¶ ì„¤ì • (ì„ íƒ)

### Phase B: ë ˆì´ì•„ì›ƒ ì½”ì–´ ì¶”ì¶œ
- [ ] `packages/layout-core/` ìƒì„±
- [ ] ìƒìˆ˜, íƒ€ì… ì´ë™
- [ ] TabBar, Header ì¶”ìƒí™”
- [ ] ê° ì•±ì—ì„œ í™•ì¥ ì‚¬ìš©

### Phase C: ìŠ¤í† ì–´ ìœ í‹¸ë¦¬í‹°
- [ ] ì œë„¤ë¦­ ìŠ¤í† ì–´ íŒ©í† ë¦¬ ì„¤ê³„
- [ ] êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
- [ ] ê° ì•± ë§ˆì´ê·¸ë ˆì´ì…˜

---

## 6. ì£¼ì˜ì‚¬í•­

### 6.1 ê³µìš©í™” ì‹œ ê³ ë ¤ì‚¬í•­
1. **ë²„ì „ ê´€ë¦¬**: íŒ¨í‚¤ì§€ ë³€ê²½ ì‹œ ì•± í˜¸í™˜ì„± í™•ì¸
2. **ì˜ì¡´ì„±**: ìˆœí™˜ ì°¸ì¡° ë°©ì§€
3. **ë¹Œë“œ**: ëª¨ë…¸ë ˆí¬ ë¹Œë“œ ìˆœì„œ ì„¤ì •
4. **í…ŒìŠ¤íŠ¸**: ê³µìš© íŒ¨í‚¤ì§€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### 6.2 í”¼í•´ì•¼ í•  ê²ƒ
- ê³¼ë„í•œ ì¶”ìƒí™”ë¡œ ì¸í•œ ë³µì¡ì„± ì¦ê°€
- ì•± íŠ¹í™” ë¡œì§ì˜ ë¬´ë¦¬í•œ ê³µìš©í™”
- ì„±ê¸‰í•œ ë§ˆì´ê·¸ë ˆì´ì…˜

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë‚´ìš© |
|------|------|
| 2026-01-29 | ì´ˆì•ˆ ì‘ì„± - PMS/DMS ë¹„êµ ë¶„ì„ ì™„ë£Œ |
