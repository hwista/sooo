# π“ μ¤‘λ³µ λ΅μ§ ν¨ν„΄ λ¶„μ„ κ²°κ³Ό

**μ‘μ—…**: Phase 1.3.1 - μ¤‘λ³µ λ΅μ§ ν¨ν„΄ λ¶„μ„  
**λ‚ μ§**: 2025-10-28  
**μƒνƒ**: β… μ™„λ£

---

## π” λ°κ²¬λ μ¤‘λ³µ λ΅μ§ ν¨ν„΄

### 1. **κ²½λ΅ μ •κ·ν™” λ΅μ§** β­β­β­β­β­
**μ°μ„ μμ„**: μµκ³  (17κ° μ¤‘λ³µ λ°κ²¬)

#### μ¤‘λ³µ ν¨ν„΄
```typescript
// ν¨ν„΄ 1: λ°±μ¬λμ‹λ¥Ό μ¬λμ‹λ΅ λ³€ν™
const normalizedPath = path.replace(/\\/g, '/');

// ν¨ν„΄ 2: λ”λΈ” λ°±μ¬λμ‹λ¥Ό μ¬λμ‹λ΅ λ³€ν™
const relativePath = path.relative(ROOT_DIR, fullPath).replace(/\\\\/g, "/");
```

#### λ°κ²¬ μ„μΉ
- `app/api/files/route.ts` (1κ³³)
- `app/wiki/page.tsx` (1κ³³)
- `components/TreeComponent.tsx` (5κ³³)
- `components/CreateFileModal.tsx` (3κ³³)

#### ν†µν•© κ°€λ¥μ„±
**λ§¤μ° λ†’μ** - λ¨λ“  μ„μΉμ—μ„ λ™μΌν• λ©μ (Windows/Unix κ²½λ΅ νΈν™μ„±)

---

### 2. **νμΌ ν™•μ¥μ κ²€μ‚¬ λ΅μ§** β­β­β­β­
**μ°μ„ μμ„**: λ†’μ (8κ° μ¤‘λ³µ λ°κ²¬)

#### μ¤‘λ³µ ν¨ν„΄
```typescript
// ν¨ν„΄: .md νμΌ κ²€μ‚¬
if (fileName.endsWith('.md')) { ... }
if (entry.name.endsWith(".md")) { ... }
name?.endsWith(".md") ? name : `${name}.md`
```

#### λ°κ²¬ μ„μΉ
- `app/api/files/route.ts` (1κ³³)
- `app/api/file/route.ts` (1κ³³)
- `app/wiki/page.tsx` (1κ³³)
- `app/wiki/page-broken.tsx` (2κ³³)

#### ν†µν•© κ°€λ¥μ„±
**λ†’μ** - λ§ν¬λ‹¤μ΄ νμΌ κ²€μ¦ λ΅μ§μΌλ΅ ν†µν•© κ°€λ¥

---

### 3. **API νΈμ¶ ν¨ν„΄** β­β­β­β­
**μ°μ„ μμ„**: λ†’μ (22κ° μ¤‘λ³µ λ°κ²¬)

#### μ¤‘λ³µ ν¨ν„΄
```typescript
// ν¨ν„΄: fetch API νΈμ¶ + μ—λ¬ μ²λ¦¬
const response = await fetch('/api/file', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ action, path, ... })
});

if (!response.ok) {
  throw new Error('API νΈμ¶ μ‹¤ν¨');
}
```

#### λ°κ²¬ μ„μΉ
- `app/wiki/page.tsx` (8κ³³)
- `hooks/useFileOperations.ts` (6κ³³)

#### ν†µν•© κ°€λ¥μ„±
**λ§¤μ° λ†’μ** - API ν΄λΌμ΄μ–ΈνΈ λ μ΄μ–΄λ΅ μ¶”μƒν™” κ°€λ¥

---

### 4. **μ—λ¬ μ²λ¦¬ λ° λ΅κΉ… ν¨ν„΄** β­β­β­
**μ°μ„ μμ„**: μ¤‘κ°„ (50+ μ¤‘λ³µ λ°κ²¬)

#### μ¤‘λ³µ ν¨ν„΄
```typescript
// ν¨ν„΄ 1: try-catch + console.error
try {
  // λ΅μ§
} catch (error) {
  console.error('μ‘μ—… μ‹¤ν¨:', error);
}

// ν¨ν„΄ 2: μƒμ„Έ λ΅κΉ…
console.log('μ‘μ—… μ‹μ‘:', params);
console.log('μ‘μ—… μ™„λ£');
```

#### λ°κ²¬ μ„μΉ
- `app/wiki/page.tsx` (30+ κ³³)
- `hooks/useFileOperations.ts` (8κ³³)
- `hooks/useNotification.ts` (6κ³³)
- `hooks/useContextMenu.ts` (4κ³³)

#### ν†µν•© κ°€λ¥μ„±
**μ¤‘κ°„** - λ΅κΉ… μ ν‹Έλ¦¬ν‹° + μ—λ¬ μ²λ¦¬ ν—¬νΌλ΅ λ¶„λ¦¬ κ°€λ¥

---

### 5. **νμΌλ… κ²€μ¦ λ΅μ§** β­β­
**μ°μ„ μμ„**: λ‚®μ

#### μ¤‘λ³µ ν¨ν„΄
```typescript
// ν¨ν„΄: νμΌλ… μ ν¨μ„± κ²€μ‚¬
const isValidFileName = (name: string) => {
  return name && name.trim() && !name.includes('/') && !name.includes('\\');
};
```

#### λ°κ²¬ μ„μΉ
- `components/CreateFileModal.tsx`
- μ•”μ‹μ μΌλ΅ μ—¬λ¬ κ³³μ—μ„ ν•„μ”

---

## π“ μ°μ„ μμ„ λ§¤νΈλ¦­μ¤

| ν¨ν„΄ | μ¤‘λ³µ νμ | μν–¥λ„ | λ³µμ΅λ„ | ν†µν•© μ©μ΄μ„± | μ΄μ  |
|------|-----------|--------|--------|------------|------|
| κ²½λ΅ μ •κ·ν™” | 17 | β­β­β­β­β­ | β­ | β­β­β­β­β­ | **18** |
| API νΈμ¶ | 22 | β­β­β­β­ | β­β­β­ | β­β­β­β­ | **16** |
| νμΌ ν™•μ¥μ | 8 | β­β­β­ | β­ | β­β­β­β­β­ | **12** |
| μ—λ¬/λ΅κΉ… | 50+ | β­β­ | β­β­ | β­β­β­ | **10** |
| νμΌλ… κ²€μ¦ | 2 | β­β­ | β­ | β­β­β­β­ | **8** |

---

## π― λ¦¬ν©ν† λ§ μ°μ„ μμ„ κ²°μ •

### **1μμ„: κ²½λ΅ μ •κ·ν™” λ΅μ§** π¥‡
- **μ΄μ **: κ°€μ¥ λ†’μ€ μ μ (18μ )
- **ν¨κ³Ό**: 17κ° μ¤‘λ³µ μ κ±°, ν¬λ΅μ¤ ν”λ«νΌ νΈν™μ„± ν–¥μƒ
- **λ¦¬μ¤ν¬**: λ§¤μ° λ‚®μ (μμ ν•¨μ)

### **2μμ„: API νΈμ¶ ν¨ν„΄** π¥  
- **μ΄μ **: λ†’μ€ μν–¥λ„μ™€ μ¤‘λ³µ νμ
- **ν¨κ³Ό**: μΌκ΄€λ API νΈμ¶, μ—λ¬ μ²λ¦¬ ν‘μ¤€ν™”
- **λ¦¬μ¤ν¬**: μ¤‘κ°„ (κΈ°μ΅΄ λ΅μ§ λ³€κ²½)

### **3μμ„: νμΌ ν™•μ¥μ κ²€μ‚¬** π¥‰
- **μ΄μ **: μ¤‘κ°„ μ μ, κµ¬ν„ μ©μ΄μ„±
- **ν¨κ³Ό**: νμΌ νƒ€μ… κ²€μ¦ ν‘μ¤€ν™”
- **λ¦¬μ¤ν¬**: λ‚®μ

---

## π“ λ‹¤μ λ‹¨κ³„ κ³„ν

### **1.3.2 μ ν‹Έλ¦¬ν‹° ν•¨μ λ¶„λ¥ λ° μ„¤κ³„**
λ‹¤μ μ°μ„ μμ„λ΅ κµ¬ν„ν•  μ ν‹Έλ¦¬ν‹°λ“¤:

```typescript
// utils/pathUtils.ts
export const normalizePath = (path: string): string;
export const isValidPath = (path: string): boolean;

// utils/fileUtils.ts  
export const isMarkdownFile = (filename: string): boolean;
export const addMarkdownExtension = (name: string): string;
export const getFileExtension = (filename: string): string;
export const isValidFileName = (name: string): boolean;

// services/apiClient.ts
export const fileApi = {
  read: (path: string) => Promise<string>,
  write: (path: string, content: string) => Promise<void>,
  delete: (path: string) => Promise<void>,
  rename: (oldPath: string, newPath: string) => Promise<void>,
  list: () => Promise<FileNode[]>
};

// utils/logger.ts
export const logger = {
  info: (message: string, data?: any) => void,
  error: (message: string, error?: Error) => void,
  warn: (message: string, data?: any) => void
};
```

---

## β… μ²΄ν¬ν¬μΈνΈ

- [x] κ²½λ΅ μ •κ·ν™” ν¨ν„΄ 17κ° μ‹λ³„
- [x] API νΈμ¶ ν¨ν„΄ 22κ° μ‹λ³„  
- [x] νμΌ ν™•μ¥μ κ²€μ‚¬ 8κ° μ‹λ³„
- [x] μ—λ¬/λ΅κΉ… ν¨ν„΄ 50+ κ° μ‹λ³„
- [x] μ°μ„ μμ„ λ§¤νΈλ¦­μ¤ μ™„μ„±
- [x] λ‹¤μ λ‹¨κ³„ κ³„ν μλ¦½

**λ‹¤μ μ‘μ—…**: 1.3.2 μ ν‹Έλ¦¬ν‹° ν•¨μ λ¶„λ¥ λ° μ„¤κ³„