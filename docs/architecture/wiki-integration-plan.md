# 도큐먼트 관리 시스템 통합 계획

> 작성일: 2026-01-21  
> 상태: 진행 중  
> 범위: 프로젝트 관리 시스템 + 도큐먼트 관리 시스템 + 공용 백엔드

---

## 개요

현재 프로젝트 관리 시스템(web-pms)과 별도로 운영 중인 도큐먼트 관리 시스템을 모노레포에 통합하고, 추후 공용 백엔드(server)와 연동할 수 있는 구조로 정리한다. 도큐먼트 관리 시스템은 별도 빌드/배포로 유지하되, 문서/산출물 연동을 위한 구조적 기반을 마련한다.

---

## 목적

- 문서 관리(도큐먼트 관리 시스템)와 프로젝트 산출물 연결
- 공용 백엔드 기반의 권한/사용자/조직 정보 공유
- 문서 시스템의 단일 허브화 및 중복 제거
- 운영/개발 문서의 일관된 접근 방식 유지

---

## 문제 정의

- 문서 시스템이 여러 곳에 분산될 경우, 권한/검색/원본 관리가 이원화됨
- 현재 /docs 기반 문서 시스템은 향후 도큐먼트 관리 시스템과 중복될 가능성이 높음
- 도큐먼트 관리 시스템은 독립 배포를 유지해야 하므로, 모노레포 내 통합 구조가 필요

---

## 해결 방안

### 구조

```
apps/
  server/   # 공용 백엔드 (4000)
  web-pms/  # 프로젝트 관리 (3000)
  web-dms/  # 도큐먼트 관리 시스템 (3001)
packages/
  types/
  ui/
  config/
```

- 도큐먼트 관리 시스템은 GitLab 레포를 submodule로 연결
- 각 앱은 독립 빌드/배포
- 공용 백엔드는 모듈러 모노리스 구조로 확장

### 권한 모델

- 프로젝트 시스템: 기능 접근 권한
- 도큐먼트 관리 시스템: 문서 접근 권한
- 권한 모델은 분리 설계, 백엔드에서 공통 사용자/조직 정보만 공유

### 문서 원본 정책

- 문서 원본은 파일 기반 유지
- DB는 보조 저장 또는 전수 전환 시에만 원본으로 사용
- 이원화는 금지 (전환 시 일괄 전환)
- 시스템 문서는 루트 `docs/`에 유지
- 도큐먼트 관리 시스템은 자체 `docs/` 경로를 사용하므로, 빌드 시점에 루트 `docs/`를 동기화하여 배포본에 포함
- `docs/`는 공통/시스템별로 구분된 디렉토리 구조를 사용
  - `docs/common/` (공통 규칙/프로세스/표준)
  - `docs/pms/` (프로젝트 관리 시스템 문서)
  - `docs/dms/` (도큐먼트 관리 시스템 문서)
  - `docs/api/` (공용 API 문서)
  - `docs/architecture/` (공통 아키텍처)

### 연동 전략

- 도큐먼트 기본 루트: 전사/공용 문서
- 프로젝트 폴더: 프로젝트 산출물 전용 경로
- 시스템 문서: `/docs/{systemCode}` 등으로 분리 접근
  - 빌드 결과물에서는 하나의 `docs/`로 병합된 상태 유지

---

## 문서 시스템 구성 정리 (롤백 기준)

프로젝트 관리 시스템에 임시로 붙이려던 문서 시스템 구성과 실제 적용 범위를 정리한다.

### 계획했던 구성

1. **MDX 기반 가이드 문서**
2. **OpenAPI 렌더러 (ReDoc)**
3. **TypeDoc 기반 코드 레퍼런스**
4. **Storybook 기반 UI 문서**

### 실제 적용된 범위

- **ReDoc 기반 API Reference UI**: web-pms에 적용됨
- **Markdown 렌더링(파일 기반)**: web-pms에 적용됨
- **OpenAPI JSON 제공**: server에 `/api/openapi.json` 추가
- **TypeDoc/Storybook**: 미적용

### 구성 요소 역할

- **`@nestjs/swagger`**: 서버에서 OpenAPI JSON을 생성하는 용도 (필수)
- **Swagger UI**: OpenAPI를 화면에 보여주는 뷰어 (선택)
- **ReDoc**: OpenAPI를 화면에 보여주는 뷰어 (선택)

> ReDoc는 Swagger UI를 대체하는 **뷰어**이며, 서버의 OpenAPI JSON 생성(@nestjs/swagger)을 대체하지 않는다.
> 따라서 ReDoc를 쓰더라도 서버에서 `@nestjs/swagger`로 `openapi.json`을 생성해야 한다.

### 롤백 기준

- **web-pms 내부 문서 UI/렌더링**은 롤백 대상
- **서버 OpenAPI JSON 제공**은 도큐먼트 관리 시스템에서도 활용되므로 유지 권장
- **TypeDoc/Storybook**은 도큐먼트 관리 시스템 도입 시점에 적용

### TypeDoc/Storybook 역할

- **TypeDoc**: TypeScript 코드(클래스/함수/타입)를 자동으로 문서화해 “내부 API 레퍼런스”를 만든다.
- **Storybook**: UI 컴포넌트의 예제/Props/상호작용을 문서로 제공해 “디자인 시스템/컴포넌트 매뉴얼” 역할을 한다.

> 두 도구는 PMS 내부에 붙이기보다 도큐먼트 관리 시스템에서 통합 제공하는 것이 구조적으로 적합하다.

### 문서 전환 원칙

- TypeDoc/Storybook으로 대체 가능한 “기작성 레퍼런스 문서”는 단계적으로 정리한다.
- 대체 완료 기준: 자동 생성 문서가 동일/상위 품질로 제공되고, 링크/탐색이 보장될 때만 기존 문서를 정리한다.
- 전환은 문서 섹션 단위로 진행하고, 공지/링크 리디렉션을 포함한다.

---

## 실행 계획

### Phase 0: 준비

1. 통합 계획 문서화 (이 문서)
2. 롤백 포인트 확보 (현재 브랜치 상태 정리)
3. 도큐먼트 관리 시스템 submodule 연결 방식 확정

### Phase 1: 통합 구조 구성

1. `apps/web-dms` 디렉토리 준비
2. Git submodule 연결
3. `pnpm-workspace.yaml` 반영
4. Turborepo 파이프라인 추가 (도큐먼트 관리 시스템 빌드/린트)

### Phase 2: 운영 정책 정리

1. 도큐먼트 관리 시스템 권한 체계 정의
2. 문서 원본 정책 명문화
3. 도큐먼트/프로젝트 문서 링크 규칙 정의

### Phase 3: 백엔드 연동 준비

1. server 모듈 구조 설계 (docs 모듈 분리)
2. 공용 사용자/조직 연동 계획 수립
3. 문서/산출물 메타데이터 구조 정의

---

## 표준 작업 프로세스 준수

모든 작업은 아래 순서로 진행한다.

1. 코드 변경
2. 문서 업데이트
3. 커밋

각 단계마다 변경 단위를 작게 쪼개고, 체크포인트 커밋을 남긴다.

---

## 실행 로그

| 날짜 | 단계 | 변경 내용 | 상태 |
|------|------|----------|------|
| 2026-01-21 | Phase 0 | 통합 계획 문서 초안 작성 | ✅ |
| 2026-01-21 | Phase 1 | apps/web → apps/web-pms 리네임 완료 | ✅ |
| 2026-01-21 | Phase 1 | apps/web-dms 디렉토리 준비 | ✅ |
| 2026-01-21 | Phase 1 | PMS 문서 UI/렌더링 롤백 진행 | 🔄 |

---

## 롤백 포인트

- Phase 단위로 커밋을 분리한다.
- 문제 발생 시 직전 체크포인트 커밋으로 되돌린다.

---

## Backlog

| ID | 항목 | 우선순위 | 상태 |
|----|------|----------|------|
| DOC-01 | 도큐먼트 관리 시스템 submodule 추가 | P1 | 🔲 대기 |
| DOC-02 | pnpm-workspace/turbo pipeline 반영 | P1 | 🔲 대기 |
| DOC-03 | 도큐먼트 관리 시스템 권한 모델 초안 | P2 | 🔲 대기 |
| DOC-04 | 문서/산출물 연동 규칙 정의 | P2 | 🔲 대기 |
| DOC-05 | server docs 모듈 설계 | P3 | 🔲 대기 |
| DOC-06 | apps/web → apps/web-pms 리네임 | P1 | ✅ 완료 |

---

## Changelog

| 날짜 | 변경 내용 |
|------|----------|
| 2026-01-21 | 도큐먼트 관리 시스템 통합 계획서 초안 작성 |
| 2026-01-21 | 시스템 문서 동기화(루트 docs → 도큐먼트 시스템 docs) 정책 추가 |
| 2026-01-21 | web 앱 명칭을 web-pms로 정리 |
